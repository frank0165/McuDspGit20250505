/***********************************************************************
	* 文 件 名： sff_8472.c
	* 负 责 人： gqhuan
	* 创建日期： 2024-06
	* 文件描述： SFF8472功能函数
	* 版权说明： Copyright (c) 1999-2024    烽火通信科技股份有限公司
	* 其    他： 
	* 修改日志： 
************************************************************************/


#include "string.h"
#include "mcu_global_vars_param.h"
#include "sff_8472.h"
#include "mcu_pin_type.h"

#include "tec_comm.h"
#include "ddm_50g_config_interface.h"
#include "ddm_10g_config_interface.h"
#include "ddm_1g_config_interface.h"
#include "thermistor_rth.h"

//#include "gn7161.h"
#include "gn7153.h"
#include "ux3326.h"


/*DDM监控物理量ADC输出值*/
volatile DDM_ADC_OUT_VAL  ddm_adc_out_val;

/*光模块默认参数*/
volatile OM_DEFAULT_CONFIG om_default_config;

/*光模块速率模式*/
volatile SFF_MODULE_TYPE sff_module_type;

/*光模块默认参数 */
volatile uint8_t default_config_value[FLASH_CONFIG_LENGTH];






/*************************************************************************
* 变量功能：DDM自动轮询开关
* 取值范围：SET or RESET
* 注意事项：对应虚拟寄存器:CMD_DDM_SWITCH_ATUO_PROCESS_REG
*************************************************************************/
/*uint8_t g_50g_ddm_sw_auto_process_flag = SET;
uint8_t g_10g_ddm_sw_auto_process_flag = SET;
uint8_t g_1g_ddm_sw_auto_process_flag = SET;
uint8_t g_ddm_sw_auto_process_flag = SET;
*/

/* SFF-8472 A0*/
volatile uint8_t a0[OM_TABLE_SFF_8472_DATA_LEN] =
{
		0x00,	/*	0	0x00 */
		0x0C,	/*	1	0x01 */
		0x01,	/*	2	0x02 */
		0x00,	/*	3	0x03 */
		0x00,	/*	4	0x04 */
		0x00,	/*	5	0x05 */
		0x00,	/*	6	0x06 */
		0x00,	/*	7	0x07 */
		0x00,	/*	8	0x08 */
		0x00,	/*	9	0x09 */
		0x00,	/*	10	0x0A */
		0x03,	/*	11	0x0B */
		0xFF,	/*	12	0x0C */
		0xF9,	/*	13	0x0D */
		0x14,	/*	14	0x0E */
		0xC8,	/*	15	0x0F */
		0x00,	/*	16	0x10 */
		0x00,	/*	17	0x11 */
		0x00,	/*	18	0x12 */
		0x00,	/*	19	0x13 */
		0x46,	/*	20	0x14 */ /*F*/ /*vendor name start*/
		0x69,	/*	21	0x15 */ /*i*/
		0x62,	/*	22	0x16 */ /*b*/
		0x65,	/*	23	0x17 */ /*e*/
		0x72,	/*	24	0x18 */ /*r*/
		0x48,	/*	25	0x19 */ /*h*/
		0x6F,	/*	26	0x1A */ /*o*/
		0x6D,	/*	27	0x1B */ /*m*/
		0x65,	/*	28	0x1C */ /*e*/
		0x20,	/*	29	0x1D */
		0x20,	/*	30	0x1E */
		0x20,	/*	31	0x1F */
		0x20,	/*	32	0x20 */
		0x20,	/*	33	0x21 */
		0x20,	/*	34	0x22 */
		0x20,	/*	35	0x23 */ /*vendor name end*/
		0x00,	/*	36	0x24 */
		0x00,	/*	37	0x25 */
		0x00,	/*	38	0x26 */
		0x00,	/*	39	0x27 */
		0x46,	/*	40	0x28 */ /*F*//*PN start*/
		0x48,	/*	41	0x29 */ /*H*/
		0x37,	/*	42	0x2A */ /*7*/
		0x31,	/*	43	0x2B */ /*1*/
		0x30,	/*	44	0x2C */ /*0*/
		0x36,	/*	45	0x2D */ /*6*/
		0x41,	/*	46	0x2E */ /*A*/
		0x33,	/*	47	0x2F */ /*3*/
		0x30,	/*	48	0x30 */ /*0*/
		0x31,	/*	49	0x31 */ /*1*/
		0x20,	/*	50	0x32 */ 
		0x20,	/*	51	0x33 */ 
		0x20,	/*	52	0x34 */ 
		0x20,	/*	53	0x35 */ 
		0x20,	/*	54	0x36 */ 
		0x20,	/*	55	0x37 */ /*PN end*/
		0x41,	/*	56	0x38 */
		0x20,	/*	57	0x39 */
		0x20,	/*	58	0x3A */
		0x20,	/*	59	0x3B */
		0x86,	/*	60	0x3C */
		0x80,	/*	61	0x3D */
		0x00,	/*	62	0x3E */
		0x00,	/*	63	0x3F */
		0x04,	/*	64	0x40 */
		0x3C,	/*	65	0x41 */
		0x00,	/*	66	0x42 */
		0x00,	/*	67	0x43 */
		0x00,	/*	68	0x44 */ /*0*//*SN start*/
		0x00,	/*	69	0x45 */ /*0*/
		0x00,	/*	70	0x46 */ /*0*/
		0x00,	/*	71	0x47 */ /*0*/
		0x00,	/*	72	0x48 */ /*0*/
		0x00,	/*	73	0x49 */ /*0*/
		0x00,	/*	74	0x4A */ /*0*/
		0x00,	/*	75	0x4B */ /*0*/
		0x00,	/*	76	0x4C */ /*0*/
		0x00,	/*	77	0x4D */ /*0*/
		0x00,	/*	78	0x4E */ /*0*/
		0x00,	/*	79	0x4F */ /*0*/
		0x00,	/*	80	0x50 */
		0x00,	/*	81	0x51 */
		0x00,	/*	82	0x52 */
		0x00,	/*	83	0x53 */ /* SN end */
		0x32,	/*	84	0x54 */
		0x34,	/*	85	0x55 */
		0x30,	/*	86	0x56 */
		0x31,	/*	87	0x57 */
		0x30,	/*	88	0x58 */
		0x31,	/*	89	0x59 */
		0x00,	/*	90	0x5A */
		0x00,	/*	91	0x5B */
		0x68,	/*	92	0x5C */
		0xA0,	/*	93	0x5D */
		0x09,	/*	94	0x5E */
		0x00,	/*	95	0x5F */
		0x46,	/*	96	0x60 */
		0x48,	/*	97	0x61 */
		0x4E,	/*	98	0x62 */
		0x41,	/*	99	0x63 */
		0x00,	/*	100	0x64 */
		0x00,	/*	101	0x65 */
		0x00,	/*	102	0x66 */
		0x00,	/*	103	0x67 */
		0x00,	/*	104	0x68 */
		0x00,	/*	105	0x69 */
		0x00,	/*	106	0x6A */
		0x00,	/*	107	0x6B */
		0x00,	/*	108	0x6C */
		0x00,	/*	109	0x6D */
		0x00,	/*	110	0x6E */
		0x00,	/*	111	0x6F */
		0x00,	/*	112	0x70 */
		0x00,	/*	113	0x71 */
		0x00,	/*	114	0x72 */
		0x00,	/*	115	0x73 */
		0x00,	/*	116	0x74 */
		0x00,	/*	117	0x75 */
		0x00,	/*	118	0x76 */
		0x00,	/*	119	0x77 */
		0x00,	/*	120	0x78 */
		0x00,	/*	121	0x79 */
		0x00,	/*	122	0x7A */
		0x00,	/*	123	0x7B */
		0x00,	/*	124	0x7C */
		0x00,	/*	125	0x7D */
		0x00,	/*	126	0x7E */
		0x00,	/*	127	0x7F */
		0x00,	/*	128	0x80 */
		0x00,	/*	129	0x81 */
		0x00,	/*	130	0x82 */
		0x00,	/*	131	0x83 */
		0x00,	/*	132	0x84 */
		0x00,	/*	133	0x85 */
		0x00,	/*	134	0x86 */
		0x00,	/*	135	0x87 */
		0x00,	/*	136	0x88 */
		0x00,	/*	137	0x89 */
		0x00,	/*	138	0x8A */
		0x00,	/*	139	0x8B */
		0x00,	/*	140	0x8C */
		0x00,	/*	141	0x8D */
		0x00,	/*	142	0x8E */
		0x00,	/*	143	0x8F */
		0x00,	/*	144	0x90 */
		0x00,	/*	145	0x91 */
		0x00,	/*	146	0x92 */
		0x00,	/*	147	0x93 */
		0x00,	/*	148	0x94 */
		0x00,	/*	149	0x95 */
		0x00,	/*	150	0x96 */
		0x00,	/*	151	0x97 */
		0x00,	/*	152	0x98 */
		0x00,	/*	153	0x99 */
		0x00,	/*	154	0x9A */
		0x00,	/*	155	0x9B */
		0x00,	/*	156	0x9C */
		0x00,	/*	157	0x9D */
		0x00,	/*	158	0x9E */
		0x00,	/*	159	0x9F */
		0x00,	/*	160	0xA0 */
		0x00,	/*	161	0xA1 */
		0x00,	/*	162	0xA2 */
		0x00,	/*	163	0xA3 */
		0x00,	/*	164	0xA4 */
		0x00,	/*	165	0xA5 */
		0x00,	/*	166	0xA6 */
		0x00,	/*	167	0xA7 */
		0x00,	/*	168	0xA8 */
		0x00,	/*	169	0xA9 */
		0x00,	/*	170	0xAA */
		0x00,	/*	171	0xAB */
		0x00,	/*	172	0xAC */
		0x00,	/*	173	0xAD */
		0x00,	/*	174	0xAE */
		0x00,	/*	175	0xAF */
		0x00,	/*	176	0xB0 */
		0x00,	/*	177	0xB1 */
		0x00,	/*	178	0xB2 */
		0x00,	/*	179	0xB3 */
		0x00,	/*	180	0xB4 */
		0x00,	/*	181	0xB5 */
		0x00,	/*	182	0xB6 */
		0x00,	/*	183	0xB7 */
		0x00,	/*	184	0xB8 */
		0x00,	/*	185	0xB9 */
		0x00,	/*	186	0xBA */
		0x00,	/*	187	0xBB */
		0x00,	/*	188	0xBC */
		0x00,	/*	189	0xBD */
		0x00,	/*	190	0xBE */
		0x00,	/*	191	0xBF */
		0x00,	/*	192	0xC0 */
		0x00,	/*	193	0xC1 */
		0x00,	/*	194	0xC2 */
		0x00,	/*	195	0xC3 */
		0x00,	/*	196	0xC4 */
		0x00,	/*	197	0xC5 */
		0x00,	/*	198	0xC6 */
		0x00,	/*	199	0xC7 */
		0x00,	/*	200	0xC8 */
		0x00,	/*	201	0xC9 */
		0x00,	/*	202	0xCA */
		0x00,	/*	203	0xCB */
		0x00,	/*	204	0xCC */
		0x00,	/*	205	0xCD */
		0x00,	/*	206	0xCE */
		0x00,	/*	207	0xCF */
		0x00,	/*	208	0xD0 */
		0x00,	/*	209	0xD1 */
		0x00,	/*	210	0xD2 */
		0x00,	/*	211	0xD3 */
		0x00,	/*	212	0xD4 */
		0x00,	/*	213	0xD5 */
		0x00,	/*	214	0xD6 */
		0x00,	/*	215	0xD7 */
		0x00,	/*	216	0xD8 */
		0x00,	/*	217	0xD9 */
		0x00,	/*	218	0xDA */
		0x00,	/*	219	0xDB */
		0x00,	/*	220	0xDC */
		0x00,	/*	221	0xDD */
		0x00,	/*	222	0xDE */
		0x00,	/*	223	0xDF */
		0x00,	/*	224	0xE0 */
		0x00,	/*	225	0xE1 */
		0x00,	/*	226	0xE2 */
		0x00,	/*	227	0xE3 */
		0x00,	/*	228	0xE4 */
		0x00,	/*	229	0xE5 */
		0x00,	/*	230	0xE6 */
		0x00,	/*	231	0xE7 */
		0x00,	/*	232	0xE8 */
		0x00,	/*	233	0xE9 */
		0x00,	/*	234	0xEA */
		0x00,	/*	235	0xEB */
		0x00,	/*	236	0xEC */
		0x00,	/*	237	0xED */
		0x00,	/*	238	0xEE */
		0x00,	/*	239	0xEF */
		0x00,	/*	240	0xF0 */
		0x00,	/*	241	0xF1 */
		0x00,	/*	242	0xF2 */
		0x00,	/*	243	0xF3 */
		0x00,	/*	244	0xF4 */
		0x00,	/*	245	0xF5 */
		0x00,	/*	246	0xF6 */
		0x00,	/*	247	0xF7 */
		0x00,	/*	248	0xF8 */
		0x00,	/*	249	0xF9 */
		0x00,	/*	250	0xFA */
		0x00,	/*	251	0xFB */
		0x00,	/*	252	0xFC */
		0x00,	/*	253	0xFD */
		0x00,	/*	254	0xFE */
		0x00	/*	255	0xFF */
};

volatile uint8_t a2[OM_TABLE_SFF_8472_DATA_LEN] =
{
		0x50,	/*	0 	0x00 */
		0x00,	/*	1	0x01 */
		0xF1,	/*	2	0x02 */
		0x00,	/*	3	0x03 */
		0x4B,	/*	4	0x04 */
		0x00,	/*	5	0x05 */
		0xF8,	/*	6	0x06 */
		0x00,	/*	7	0x07 */
		0x8D,	/*	8	0x08 */
		0xCC,	/*	9	0x09 */
		0x74,	/*	10	0x0A */
		0x04,	/*	11	0x0B */
		0x87,	/*	12	0x0C */
		0x8C,	/*	13	0x0D */
		0x7A,	/*	14	0x0E */
		0x44,	/*	15	0x0F */
		0xFF,	/*	16	0x10*/
		0xFF,	/*	17	0x11*/
		0xFF,	/*	18	0x12*/
		0xFF,	/*	19	0x13*/
		0xFF,	/*	20	0x14*/
		0xFF,	/*	21	0x15*/
		0xFF,	/*	22	0x16*/
		0xFF,	/*	23	0x17*/
		0xC2,	/*	24	0x18*/
		0x63,	/*	25	0x19*/
		0x15,	/*	26	0x1A*/
		0xCF,	/*	27	0x1B*/
		0x9A,	/*	28	0x1C*/
		0x68,	/*	29	0x1D*/
		0x1B,	/*	30	0x1E*/
		0x75,	/*	31	0x1F*/
		0x09,	/*	32	0x20*/
		0xCF,	/*	33	0x21*/
		0x00,	/*	34	0x22*/
		0x0B,	/*	35	0x23*/
		0x07,	/*	36	0x24*/
		0xCB,	/*	37	0x25*/
		0x00,	/*	38	0x26*/
		0x0E,	/*	39	0x27*/
		0xFF,	/*	40	0x28*/
		0xFF,	/*	41	0x29*/
		0xFF,	/*	42	0x2A*/
		0xFF,	/*	43	0x2B*/
		0xFF,	/*	44	0x2C*/
		0xFF,	/*	45	0x2D*/
		0xFF,	/*	46	0x2E*/
		0xFF,	/*	47	0x2F*/
		0xFF,	/*	48	0x30*/
		0xFF,	/*	49	0x31*/
		0xFF,	/*	50	0x32*/
		0xFF,	/*	51	0x33*/
		0xFF,	/*	52	0x34*/
		0xFF,	/*	53	0x35*/
		0xFF,	/*	54	0x36*/
		0xFF,	/*	55	0x37*/
		0x00,	/*	56	0x38*/
		0x00,	/*	57	0x39*/
		0x00,	/*	58	0x3A*/
		0x00,	/*	59	0x3B*/
		0x00,	/*	60	0x3C*/
		0x00,	/*	61	0x3D*/
		0x00,	/*	62	0x3E*/
		0x00,	/*	63	0x3F*/
		0x00,	/*	64	0x40*/
		0x00,	/*	65	0x41*/
		0x00,	/*	66	0x42*/
		0x00,	/*	67	0x43*/
		0x3F,	/*	68	0x44*/
		0x80,	/*	69	0x45*/
		0x00,	/*	70	0x46*/
		0x00,	/*	71	0x47*/
		0x00,	/*	72	0x48*/
		0x00,	/*	73	0x49*/
		0x00,	/*	74	0x4A*/
		0x00,	/*	75	0x4B*/
		0x00,	/*	76	0x4C*/
		0x01,	/*	77	0x4D*/
		0x00,	/*	78	0x4E*/
		0x00,	/*	79	0x4F*/
		0x00,	/*	80	0x50*/
		0x01,	/*	81	0x51*/
		0x00,	/*	82	0x52*/
		0x00,	/*	83	0x53*/
		0x00,	/*	84	0x54*/
		0x01,	/*	85	0x55*/
		0x00,	/*	86	0x56*/
		0x00,	/*	87	0x57*/
		0x00,	/*	88	0x58*/
		0x01,	/*	89	0x59*/
		0x00,	/*	90	0x5A*/
		0x00,	/*	91	0x5B*/
		0xFF,	/*	92	0x5C*/
		0xFF,	/*	93	0x5D*/
		0xFF,	/*	94	0x5E*/
		0xFF,	/*	95	0x5F*/
		0xFF,	/*	96	0x60*/
		0xFF,	/*	97	0x61*/
		0xFF,	/*	98	0x62*/
		0xFF,	/*	99	0x63*/
		0x00,	/*	100	0x64*/
		0x00,	/*	101	0x65*/
		0x00,	/*	102	0x66*/
		0x00,	/*	103	0x67*/
		0x00,	/*	104	0x68*/
		0x00,	/*	105	0x69*/
		0xFF,	/*	106	0x6A*/
		0xFF,	/*	107	0x6B*/
		0xFF,	/*	108	0x6C*/
		0xFF,	/*	109	0x6D*/
		0x00,	/*	110	0x6E*/
		0x00,	/*	111	0x6F*/
		0x00,	/*	112	0x70*/
		0x00,	/*	113	0x71*/
		0xFF,	/*	114	0x72*/
		0xFF,	/*	115	0x73*/
		0x00,	/*	116	0x74*/
		0x00,	/*	117	0x75*/
		0x00,	/*	118	0x76*/
		0x00,	/*	119	0x77*/
		0x00,	/*	120	0x78*/
		0x00,	/*	121	0x79*/
		0x00,	/*	122	0x7A*/
		0x00,	/*	123	0x7B*/
		0x00,	/*	124	0x7C*/
		0x00,	/*	125	0x7D*/
		0x00,	/*	126	0x7E*/
		0x00,	/*	127	0x7F*/
		0x00,	/*	128	0x80*/
		0x00,	/*	129	0x81*/
		0x00,	/*	130	0x82*/
		0x00,	/*	131	0x83*/
		0x00,	/*	132	0x84*/
		0x00,	/*	133	0x85*/
		0x00,	/*	134	0x86*/
		0x00,	/*	135	0x87*/
		0x00,	/*	136	0x88*/
		0x00,	/*	137	0x89*/
		0x00,	/*	138	0x8A*/
		0x00,	/*	139	0x8B*/
		0x00,	/*	140	0x8C*/
		0x00,	/*	141	0x8D*/
		0x00,	/*	142	0x8E*/
		0x00,	/*	143	0x8F*/
		0x00,	/*	144	0x90*/
		0x00,	/*	145	0x91*/
		0x00,	/*	146	0x92*/
		0x00,	/*	147	0x93*/
		0x00,	/*	148	0x94*/
		0x00,	/*	149	0x95*/
		0x00,	/*	150	0x96*/
		0x00,	/*	151	0x97*/
		0x00,	/*	152	0x98*/
		0x00,	/*	153	0x99*/
		0x00,	/*	154	0x9A*/
		0x00,	/*	155	0x9B*/
		0x00,	/*	156	0x9C*/
		0x00,	/*	157	0x9D*/
		0x00,	/*	158	0x9E*/
		0x00,	/*	159	0x9F*/
		0x00,	/*	160	0xA0*/
		0x00,	/*	161	0xA1*/
		0x00,	/*	162	0xA2*/
		0x00,	/*	163	0xA3*/
		0x00,	/*	164	0xA4*/
		0x00,	/*	165	0xA5*/
		0x00,	/*	166	0xA6*/
		0x00,	/*	167	0xA7*/
		0x00,	/*	168	0xA8*/
		0x00,	/*	169	0xA9*/
		0x00,	/*	170	0xAA*/
		0x00,	/*	171	0xAB*/
		0x00,	/*	172	0xAC*/
		0x00,	/*	173	0xAD*/
		0x00,	/*	174	0xAE*/
		0x00,	/*	175	0xAF*/
		0x00,	/*	176	0xB0*/
		0x00,	/*	177	0xB1*/
		0x00,	/*	178	0xB2*/
		0x00,	/*	179	0xB3*/
		0x00,	/*	180	0xB4*/
		0x00,	/*	181	0xB5*/
		0x00,	/*	182	0xB6*/
		0x00,	/*	183	0xB7*/
		0x00,	/*	184	0xB8*/
		0x00,	/*	185	0xB9*/
		0x00,	/*	186	0xBA*/
		0x00,	/*	187	0xBB*/
		0x00,	/*	188	0xBC*/
		0x00,	/*	189	0xBD*/
		0x00,	/*	190	0xBE*/
		0x00,	/*	191	0xBF*/
		0x00,	/*	192	0xC0*/
		0x00,	/*	193	0xC1*/
		0x00,	/*	194	0xC2*/
		0x00,	/*	195	0xC3*/
		0x00,	/*	196	0xC4*/
		0x00,	/*	197	0xC5*/
		0x00,	/*	198	0xC6*/
		0x00,	/*	199	0xC7*/
		0x00,	/*	200	0xC8*/
		0x00,	/*	201	0xC9*/
		0x00,	/*	202	0xCA*/
		0x00,	/*	203	0xCB*/
		0x00,	/*	204	0xCC*/
		0x00,	/*	205	0xCD*/
		0x00,	/*	206	0xCE*/
		0x00,	/*	207	0xCF*/
		0x00,	/*	208	0xD0*/
		0x00,	/*	209	0xD1*/
		0x00,	/*	210	0xD2*/
		0x00,	/*	211	0xD3*/
		0x00,	/*	212	0xD4*/
		0x00,	/*	213	0xD5*/
		0x00,	/*	214	0xD6*/
		0x00,	/*	215	0xD7*/
		0x00,	/*	216	0xD8*/
		0x00,	/*	217	0xD9*/
		0x00,	/*	218	0xDA*/
		0x00,	/*	219	0xDB*/
		0x00,	/*	220	0xDC*/
		0x00,	/*	221	0xDD*/
		0x00,	/*	222	0xDE*/
		0x00,	/*	223	0xDF*/
		0x00,	/*	224	0xE0*/
		0x00,	/*	225	0xE1*/
		0x00,	/*	226	0xE2*/
		0x00,	/*	227	0xE3*/
		0x00,	/*	228	0xE4*/
		0x00,	/*	229	0xE5*/
		0x00,	/*	230	0xE6*/
		0x00,	/*	231	0xE7*/
		0x00,	/*	232	0xE8*/
		0x00,	/*	233	0xE9*/
		0x00,	/*	234	0xEA*/
		0x00,	/*	235	0xEB*/
		0x00,	/*	236	0xEC*/
		0x00,	/*	237	0xED*/
		0x00,	/*	238	0xEE*/
		0x00,	/*	239	0xEF*/
		0x00,	/*	240	0xF0*/
		0x00,	/*	241	0xF1*/
		0x00,	/*	242	0xF2*/
		0x00,	/*	243	0xF3*/
		0x00,	/*	244	0xF4*/
		0x00,	/*	245	0xF5*/
		0x00,	/*	246	0xF6*/
		0x00,	/*	247	0xF7*/
		0x00,	/*	248	0xF8*/
		0x00,	/*	249	0xF9*/
		0x00,	/*	250	0xFA*/
		0x00,	/*	251	0xFB*/
		0x00,	/*	252	0xFC*/
		0x00,	/*	253	0xFD*/
		0x00,	/*	254	0xFE*/
		0x00	/*	255	0xFF*/
};

volatile uint8_t b0[OM_TABLE_SFF_8472_DATA_LEN] =
{
		0x00,	/*	0	0x00 */
		0x00,	/*	1	0x01 */
		0x00,	/*	2	0x02 */
		0x00,	/*	3	0x03 */
		0x00,	/*	4	0x04 */
		0x00,	/*	5	0x05 */
		0x00,	/*	6	0x06 */
		0x00,	/*	7	0x07 */
		0x00,	/*	8	0x08 */
		0x00,	/*	9	0x09 */
		0x00,	/*	10	0x0A */
		0x03,	/*	11	0x0B */
		0x63,	/*	12	0x0C */
		0x63,	/*	13	0x0D */
		0x00,	/*	14	0x0E */
		0x00,	/*	15	0x0F */
		0x00,	/*	16	0x10 */
		0x00,	/*	17	0x11 */
		0x00,	/*	18	0x12 */
		0x00,	/*	19	0x13 */
		0x00,	/*	20	0x14 */ /*vendor name start*/
		0x00,	/*	21	0x15 */ 
		0x00,	/*	22	0x16 */ 
		0x00,	/*	23	0x17 */ 
		0x00,	/*	24	0x18 */ 
		0x00,	/*	25	0x19 */ 
		0x00,	/*	26	0x1A */ 
		0x00,	/*	27	0x1B */ 
		0x00,	/*	28	0x1C */ 
		0x00,	/*	29	0x1D */
		0x00,	/*	30	0x1E */
		0x00,	/*	31	0x1F */
		0x00,	/*	32	0x20 */
		0x00,	/*	33	0x21 */
		0x00,	/*	34	0x22 */
		0x00,	/*	35	0x23 */ /*vendor name end*/
		0x00,	/*	36	0x24 */
		0x00,	/*	37	0x25 */
		0x00,	/*	38	0x26 */
		0x00,	/*	39	0x27 */
		0x00,	/*	40	0x28 */ /*F*//*PN start*/
		0x00,	/*	41	0x29 */ /*H*/
		0x00,	/*	42	0x2A */ /*7*/
		0x00,	/*	43	0x2B */ /*1*/
		0x00,	/*	44	0x2C */ /*0*/
		0x00,	/*	45	0x2D */ /*6*/
		0x00,	/*	46	0x2E */ /*A*/
		0x00,	/*	47	0x2F */ /*3*/
		0x00,	/*	48	0x30 */ /*0*/
		0x00,	/*	49	0x31 */ /*1*/
		0x00,	/*	50	0x32 */ 
		0x00,	/*	51	0x33 */ 
		0x00,	/*	52	0x34 */ 
		0x00,	/*	53	0x35 */ 
		0x00,	/*	54	0x36 */ 
		0x00,	/*	55	0x37 */ /*PN end*/
		0x00,	/*	56	0x38 */
		0x00,	/*	57	0x39 */
		0x00,	/*	58	0x3A */
		0x00,	/*	59	0x3B */
		0x9D,	/*	60	0x3C */
		0x7F,	/*	61	0x3D */
		0x00,	/*	62	0x3E */
		0x00,	/*	63	0x3F */
		0x00,	/*	64	0x40 */
		0x00,	/*	65	0x41 */
		0x00,	/*	66	0x42 */
		0x00,	/*	67	0x43 */
		0x00,	/*	68	0x44 */ /*0*//*SN start*/
		0x00,	/*	69	0x45 */ /*0*/
		0x00,	/*	70	0x46 */ /*0*/
		0x00,	/*	71	0x47 */ /*0*/
		0x00,	/*	72	0x48 */ /*0*/
		0x00,	/*	73	0x49 */ /*0*/
		0x00,	/*	74	0x4A */ /*0*/
		0x00,	/*	75	0x4B */ /*0*/
		0x00,	/*	76	0x4C */ /*0*/
		0x00,	/*	77	0x4D */ /*0*/
		0x00,	/*	78	0x4E */ /*0*/
		0x00,	/*	79	0x4F */ /*0*/
		0x00,	/*	80	0x50 */
		0x00,	/*	81	0x51 */
		0x00,	/*	82	0x52 */
		0x00,	/*	83	0x53 */ /* SN end */
		0x00,	/*	84	0x54 */
		0x00,	/*	85	0x55 */
		0x00,	/*	86	0x56 */
		0x00,	/*	87	0x57 */
		0x00,	/*	88	0x58 */
		0x00,	/*	89	0x59 */
		0x00,	/*	90	0x5A */
		0x00,	/*	91	0x5B */
		0x00,	/*	92	0x5C */
		0x00,	/*	93	0x5D */
		0x00,	/*	94	0x5E */
		0x00,	/*	95	0x5F */
		0x00,	/*	96	0x60 */
		0x00,	/*	97	0x61 */
		0x00,	/*	98	0x62 */
		0x00,	/*	99	0x63 */
		0x00,	/*	100	0x64 */
		0x00,	/*	101	0x65 */
		0x00,	/*	102	0x66 */
		0x00,	/*	103	0x67 */
		0x00,	/*	104	0x68 */
		0x00,	/*	105	0x69 */
		0x00,	/*	106	0x6A */
		0x00,	/*	107	0x6B */
		0x00,	/*	108	0x6C */
		0x00,	/*	109	0x6D */
		0x00,	/*	110	0x6E */
		0x00,	/*	111	0x6F */
		0x00,	/*	112	0x70 */
		0x00,	/*	113	0x71 */
		0x00,	/*	114	0x72 */
		0x00,	/*	115	0x73 */
		0x00,	/*	116	0x74 */
		0x00,	/*	117	0x75 */
		0x00,	/*	118	0x76 */
		0x00,	/*	119	0x77 */
		0x00,	/*	120	0x78 */
		0x00,	/*	121	0x79 */
		0x00,	/*	122	0x7A */
		0x00,	/*	123	0x7B */
		0x00,	/*	124	0x7C */
		0x00,	/*	125	0x7D */
		0x00,	/*	126	0x7E */
		0x00,	/*	127	0x7F */
		0x00,	/*	128	0x80 */
		0x00,	/*	129	0x81 */
		0x00,	/*	130	0x82 */
		0x00,	/*	131	0x83 */
		0x00,	/*	132	0x84 */
		0x00,	/*	133	0x85 */
		0x00,	/*	134	0x86 */
		0x00,	/*	135	0x87 */
		0x00,	/*	136	0x88 */
		0x00,	/*	137	0x89 */
		0x00,	/*	138	0x8A */
		0x00,	/*	139	0x8B */
		0x00,	/*	140	0x8C */
		0x00,	/*	141	0x8D */
		0x00,	/*	142	0x8E */
		0x00,	/*	143	0x8F */
		0x00,	/*	144	0x90 */
		0x00,	/*	145	0x91 */
		0x00,	/*	146	0x92 */
		0x00,	/*	147	0x93 */
		0x00,	/*	148	0x94 */
		0x00,	/*	149	0x95 */
		0x00,	/*	150	0x96 */
		0x00,	/*	151	0x97 */
		0x00,	/*	152	0x98 */
		0x00,	/*	153	0x99 */
		0x00,	/*	154	0x9A */
		0x00,	/*	155	0x9B */
		0x00,	/*	156	0x9C */
		0x00,	/*	157	0x9D */
		0x00,	/*	158	0x9E */
		0x00,	/*	159	0x9F */
		0x00,	/*	160	0xA0 */
		0x00,	/*	161	0xA1 */
		0x00,	/*	162	0xA2 */
		0x00,	/*	163	0xA3 */
		0x00,	/*	164	0xA4 */
		0x00,	/*	165	0xA5 */
		0x00,	/*	166	0xA6 */
		0x00,	/*	167	0xA7 */
		0x00,	/*	168	0xA8 */
		0x00,	/*	169	0xA9 */
		0x00,	/*	170	0xAA */
		0x00,	/*	171	0xAB */
		0x00,	/*	172	0xAC */
		0x00,	/*	173	0xAD */
		0x00,	/*	174	0xAE */
		0x00,	/*	175	0xAF */
		0x00,	/*	176	0xB0 */
		0x00,	/*	177	0xB1 */
		0x00,	/*	178	0xB2 */
		0x00,	/*	179	0xB3 */
		0x00,	/*	180	0xB4 */
		0x00,	/*	181	0xB5 */
		0x00,	/*	182	0xB6 */
		0x00,	/*	183	0xB7 */
		0x00,	/*	184	0xB8 */
		0x00,	/*	185	0xB9 */
		0x00,	/*	186	0xBA */
		0x00,	/*	187	0xBB */
		0x00,	/*	188	0xBC */
		0x00,	/*	189	0xBD */
		0x00,	/*	190	0xBE */
		0x00,	/*	191	0xBF */
		0x00,	/*	192	0xC0 */
		0x00,	/*	193	0xC1 */
		0x00,	/*	194	0xC2 */
		0x00,	/*	195	0xC3 */
		0x00,	/*	196	0xC4 */
		0x00,	/*	197	0xC5 */
		0x00,	/*	198	0xC6 */
		0x00,	/*	199	0xC7 */
		0x00,	/*	200	0xC8 */
		0x00,	/*	201	0xC9 */
		0x00,	/*	202	0xCA */
		0x00,	/*	203	0xCB */
		0x00,	/*	204	0xCC */
		0x00,	/*	205	0xCD */
		0x00,	/*	206	0xCE */
		0x00,	/*	207	0xCF */
		0x00,	/*	208	0xD0 */
		0x00,	/*	209	0xD1 */
		0x00,	/*	210	0xD2 */
		0x00,	/*	211	0xD3 */
		0x00,	/*	212	0xD4 */
		0x00,	/*	213	0xD5 */
		0x00,	/*	214	0xD6 */
		0x00,	/*	215	0xD7 */
		0x00,	/*	216	0xD8 */
		0x00,	/*	217	0xD9 */
		0x00,	/*	218	0xDA */
		0x00,	/*	219	0xDB */
		0x00,	/*	220	0xDC */
		0x00,	/*	221	0xDD */
		0x00,	/*	222	0xDE */
		0x00,	/*	223	0xDF */
		0x00,	/*	224	0xE0 */
		0x00,	/*	225	0xE1 */
		0x00,	/*	226	0xE2 */
		0x00,	/*	227	0xE3 */
		0x00,	/*	228	0xE4 */
		0x00,	/*	229	0xE5 */
		0x00,	/*	230	0xE6 */
		0x00,	/*	231	0xE7 */
		0x00,	/*	232	0xE8 */
		0x00,	/*	233	0xE9 */
		0x00,	/*	234	0xEA */
		0x00,	/*	235	0xEB */
		0x00,	/*	236	0xEC */
		0x00,	/*	237	0xED */
		0x00,	/*	238	0xEE */
		0x00,	/*	239	0xEF */
		0x00,	/*	240	0xF0 */
		0x00,	/*	241	0xF1 */
		0x00,	/*	242	0xF2 */
		0x00,	/*	243	0xF3 */
		0x00,	/*	244	0xF4 */
		0x00,	/*	245	0xF5 */
		0x00,	/*	246	0xF6 */
		0x00,	/*	247	0xF7 */
		0x00,	/*	248	0xF8 */
		0x00,	/*	249	0xF9 */
		0x00,	/*	250	0xFA */
		0x00,	/*	251	0xFB */
		0x00,	/*	252	0xFC */
		0x00,	/*	253	0xFD */
		0x00,	/*	254	0xFE */
		0x00	/*	255	0xFF */
};
volatile uint8_t b2[OM_TABLE_SFF_8472_DATA_LEN] =
{
		0x50,	/*	0 	0x0 */
		0x00,	/*	1	0x1 */
		0xF1,	/*	2	0x2 */
		0x00,	/*	3	0x3 */
		0x4B,	/*	4	0x4 */
		0x00,	/*	5	0x5 */
		0xF8,	/*	6	0x6 */
		0x00,	/*	7	0x7 */
		0x8D,	/*	8	0x8 */
		0xCC,	/*	9	0x9 */
		0x74,	/*	10	0xA */
		0x04,	/*	11	0xB */
		0x87,	/*	12	0xC */
		0x8C,	/*	13	0xD */
		0x7A,	/*	14	0xE */
		0x44,	/*	15	0xF */
		0xFF,	/*	16	0x10*/
		0xFF,	/*	17	0x11*/
		0xFF,	/*	18	0x12*/
		0xFF,	/*	19	0x13*/
		0xFF,	/*	20	0x14*/
		0xFF,	/*	21	0x15*/
		0xFF,	/*	22	0x16*/
		0xFF,	/*	23	0x17*/
		0x30,	/*	24	0x18*/
		0xD4,	/*	25	0x19*/
		0x09,	/*	26	0x1A*/
		0xBE,	/*	27	0x1B*/
		0x26,	/*	28	0x1C*/
		0xC9,	/*	29	0x1D*/
		0x0C,	/*	30	0x1E*/
		0x43,	/*	31	0x1F*/
		0x09,	/*	32	0x20*/
		0xCF,	/*	33	0x21*/
		0x00,	/*	34	0x22*/
		0x07,	/*	35	0x23*/
		0x07,	/*	36	0x24*/
		0xCB,	/*	37	0x25*/
		0x00,	/*	38	0x26*/
		0x0A,	/*	39	0x27*/
		0x00,	/*	40	0x28*/
		0x00,	/*	41	0x29*/
		0x00,	/*	42	0x2A*/
		0x00,	/*	43	0x2B*/
		0x00,	/*	44	0x2C*/
		0x00,	/*	45	0x2D*/
		0x00,	/*	46	0x2E*/
		0x00,	/*	47	0x2F*/
		0x00,	/*	48	0x30*/
		0x00,	/*	49	0x31*/
		0x00,	/*	50	0x32*/
		0x00,	/*	51	0x33*/
		0x00,	/*	52	0x34*/
		0x00,	/*	53	0x35*/
		0x00,	/*	54	0x36*/
		0x00,	/*	55	0x37*/
		0x00,	/*	56	0x38*/
		0x00,	/*	57	0x39*/
		0x00,	/*	58	0x3A*/
		0x00,	/*	59	0x3B*/
		0x00,	/*	60	0x3C*/
		0x00,	/*	61	0x3D*/
		0x00,	/*	62	0x3E*/
		0x00,	/*	63	0x3F*/
		0x00,	/*	64	0x40*/
		0x00,	/*	65	0x41*/
		0x00,	/*	66	0x42*/
		0x00,	/*	67	0x43*/
		0x3F,	/*	68	0x44*/
		0x80,	/*	69	0x45*/
		0x00,	/*	70	0x46*/
		0x00,	/*	71	0x47*/
		0x00,	/*	72	0x48*/
		0x00,	/*	73	0x49*/
		0x00,	/*	74	0x4A*/
		0x00,	/*	75	0x4B*/
		0x00,	/*	76	0x4C*/
		0x01,	/*	77	0x4D*/
		0x00,	/*	78	0x4E*/
		0x00,	/*	79	0x4F*/
		0x00,	/*	80	0x50*/
		0x01,	/*	81	0x51*/
		0x00,	/*	82	0x52*/
		0x00,	/*	83	0x53*/
		0x00,	/*	84	0x54*/
		0x01,	/*	85	0x55*/
		0x00,	/*	86	0x56*/
		0x00,	/*	87	0x57*/
		0x00,	/*	88	0x58*/
		0x01,	/*	89	0x59*/
		0x00,	/*	90	0x5A*/
		0x00,	/*	91	0x5B*/
		0x00,	/*	92	0x5C*/
		0x00,	/*	93	0x5D*/
		0x00,	/*	94	0x5E*/
		0x00,	/*	95	0x5F*/
		0xFF,	/*	96	0x60*/
		0xFF,	/*	97	0x61*/
		0xFF,	/*	98	0x62*/
		0xFF,	/*	99	0x63*/
		0x00,	/*	100	0x64*/
		0x00,	/*	101	0x65*/
		0x00,	/*	102	0x66*/
		0x00,	/*	103	0x67*/
		0x00,	/*	104	0x68*/
		0x00,	/*	105	0x69*/
		0x00,	/*	106	0x6A*/
		0x00,	/*	107	0x6B*/
		0x00,	/*	108	0x6C*/
		0x00,	/*	109	0x6D*/
		0x00,	/*	110	0x6E*/
		0x00,	/*	111	0x6F*/
		0x00,	/*	112	0x70*/
		0x00,	/*	113	0x71*/
		0x00,	/*	114	0x72*/
		0x00,	/*	115	0x73*/
		0x00,	/*	116	0x74*/
		0x00,	/*	117	0x75*/
		0x00,	/*	118	0x76*/
		0x00,	/*	119	0x77*/
		0x00,	/*	120	0x78*/
		0x00,	/*	121	0x79*/
		0x00,	/*	122	0x7A*/
		0x00,	/*	123	0x7B*/
		0x00,	/*	124	0x7C*/
		0x00,	/*	125	0x7D*/
		0x00,	/*	126	0x7E*/
		0x00,	/*	127	0x7F*/
		0x00,	/*	128	0x80*/
		0x00,	/*	129	0x81*/
		0x00,	/*	130	0x82*/
		0x00,	/*	131	0x83*/
		0x00,	/*	132	0x84*/
		0x00,	/*	133	0x85*/
		0x00,	/*	134	0x86*/
		0x00,	/*	135	0x87*/
		0x00,	/*	136	0x88*/
		0x00,	/*	137	0x89*/
		0x00,	/*	138	0x8A*/
		0x00,	/*	139	0x8B*/
		0x00,	/*	140	0x8C*/
		0x00,	/*	141	0x8D*/
		0x00,	/*	142	0x8E*/
		0x00,	/*	143	0x8F*/
		0x00,	/*	144	0x90*/
		0x00,	/*	145	0x91*/
		0x00,	/*	146	0x92*/
		0x00,	/*	147	0x93*/
		0x00,	/*	148	0x94*/
		0x00,	/*	149	0x95*/
		0x00,	/*	150	0x96*/
		0x00,	/*	151	0x97*/
		0x00,	/*	152	0x98*/
		0x00,	/*	153	0x99*/
		0x00,	/*	154	0x9A*/
		0x00,	/*	155	0x9B*/
		0x00,	/*	156	0x9C*/
		0x00,	/*	157	0x9D*/
		0x00,	/*	158	0x9E*/
		0x00,	/*	159	0x9F*/
		0x00,	/*	160	0xA0*/
		0x00,	/*	161	0xA1*/
		0x00,	/*	162	0xA2*/
		0x00,	/*	163	0xA3*/
		0x00,	/*	164	0xA4*/
		0x00,	/*	165	0xA5*/
		0x00,	/*	166	0xA6*/
		0x00,	/*	167	0xA7*/
		0x00,	/*	168	0xA8*/
		0x00,	/*	169	0xA9*/
		0x00,	/*	170	0xAA*/
		0x00,	/*	171	0xAB*/
		0x00,	/*	172	0xAC*/
		0x00,	/*	173	0xAD*/
		0x00,	/*	174	0xAE*/
		0x00,	/*	175	0xAF*/
		0x00,	/*	176	0xB0*/
		0x00,	/*	177	0xB1*/
		0x00,	/*	178	0xB2*/
		0x00,	/*	179	0xB3*/
		0x00,	/*	180	0xB4*/
		0x00,	/*	181	0xB5*/
		0x00,	/*	182	0xB6*/
		0x00,	/*	183	0xB7*/
		0x00,	/*	184	0xB8*/
		0x00,	/*	185	0xB9*/
		0x00,	/*	186	0xBA*/
		0x00,	/*	187	0xBB*/
		0x00,	/*	188	0xBC*/
		0x00,	/*	189	0xBD*/
		0x00,	/*	190	0xBE*/
		0x00,	/*	191	0xBF*/
		0x00,	/*	192	0xC0*/
		0x00,	/*	193	0xC1*/
		0x00,	/*	194	0xC2*/
		0x00,	/*	195	0xC3*/
		0x00,	/*	196	0xC4*/
		0x00,	/*	197	0xC5*/
		0x00,	/*	198	0xC6*/
		0x00,	/*	199	0xC7*/
		0x00,	/*	200	0xC8*/
		0x00,	/*	201	0xC9*/
		0x00,	/*	202	0xCA*/
		0x00,	/*	203	0xCB*/
		0x00,	/*	204	0xCC*/
		0x00,	/*	205	0xCD*/
		0x00,	/*	206	0xCE*/
		0x00,	/*	207	0xCF*/
		0x00,	/*	208	0xD0*/
		0x00,	/*	209	0xD1*/
		0x00,	/*	210	0xD2*/
		0x00,	/*	211	0xD3*/
		0x00,	/*	212	0xD4*/
		0x00,	/*	213	0xD5*/
		0x00,	/*	214	0xD6*/
		0x00,	/*	215	0xD7*/
		0x00,	/*	216	0xD8*/
		0x00,	/*	217	0xD9*/
		0x00,	/*	218	0xDA*/
		0x00,	/*	219	0xDB*/
		0x00,	/*	220	0xDC*/
		0x00,	/*	221	0xDD*/
		0x00,	/*	222	0xDE*/
		0x00,	/*	223	0xDF*/
		0x00,	/*	224	0xE0*/
		0x00,	/*	225	0xE1*/
		0x00,	/*	226	0xE2*/
		0x00,	/*	227	0xE3*/
		0x00,	/*	228	0xE4*/
		0x00,	/*	229	0xE5*/
		0x00,	/*	230	0xE6*/
		0x00,	/*	231	0xE7*/
		0x00,	/*	232	0xE8*/
		0x00,	/*	233	0xE9*/
		0x00,	/*	234	0xEA*/
		0x00,	/*	235	0xEB*/
		0x00,	/*	236	0xEC*/
		0x00,	/*	237	0xED*/
		0x00,	/*	238	0xEE*/
		0x00,	/*	239	0xEF*/
		0x00,	/*	240	0xF0*/
		0x00,	/*	241	0xF1*/
		0x00,	/*	242	0xF2*/
		0x00,	/*	243	0xF3*/
		0x00,	/*	244	0xF4*/
		0x00,	/*	245	0xF5*/
		0x00,	/*	246	0xF6*/
		0x00,	/*	247	0xF7*/
		0x00,	/*	248	0xF8*/
		0x00,	/*	249	0xF9*/
		0x00,	/*	250	0xFA*/
		0x00,	/*	251	0xFB*/
		0x00,	/*	252	0xFC*/
		0x00,	/*	253	0xFD*/
		0x00,	/*	254	0xFE*/
		0x00	/*	255	0xFF*/
};

volatile uint8_t c0[OM_TABLE_SFF_8472_DATA_LEN] =
{
		0x00,	/*	0	0x00 */
		0x00,	/*	1	0x01 */
		0x00,	/*	2	0x02 */
		0x00,	/*	3	0x03 */
		0x00,	/*	4	0x04 */
		0x00,	/*	5	0x05 */
		0x00,	/*	6	0x06 */
		0x00,	/*	7	0x07 */
		0x00,	/*	8	0x08 */
		0x00,	/*	9	0x09 */
		0x00,	/*	10	0x0A */
		0x03,	/*	11	0x0B */
		0x19,	/*	12	0x0C */
		0x0C,	/*	13	0x0D */
		0x00,	/*	14	0x0E */
		0x00,	/*	15	0x0F */
		0x00,	/*	16	0x10 */
		0x00,	/*	17	0x11 */
		0x00,	/*	18	0x12 */
		0x00,	/*	19	0x13 */
		0x00,	/*	20	0x14 */ /*vendor name start*/
		0x00,	/*	21	0x15 */ 
		0x00,	/*	22	0x16 */ 
		0x00,	/*	23	0x17 */ 
		0x00,	/*	24	0x18 */
		0x00,	/*	25	0x19 */ 
		0x00,	/*	26	0x1A */ 
		0x00,	/*	27	0x1B */
		0x00,	/*	28	0x1C */ 
		0x00,	/*	29	0x1D */
		0x00,	/*	30	0x1E */
		0x00,	/*	31	0x1F */
		0x00,	/*	32	0x20 */
		0x00,	/*	33	0x21 */
		0x00,	/*	34	0x22 */
		0x00,	/*	35	0x23 */ /*vendor name end*/
		0x00,	/*	36	0x24 */
		0x00,	/*	37	0x25 */
		0x00,	/*	38	0x26 */
		0x00,	/*	39	0x27 */
		0x00,	/*	40	0x28 */ /*PN start*/
		0x00,	/*	41	0x29 */ 
		0x00,	/*	42	0x2A */ 
		0x00,	/*	43	0x2B */ 
		0x00,	/*	44	0x2C */ 
		0x00,	/*	45	0x2D */ 
		0x00,	/*	46	0x2E */ 
		0x00,	/*	47	0x2F */ 
		0x00,	/*	48	0x30 */ 
		0x00,	/*	49	0x31 */ 
		0x00,	/*	50	0x32 */ 
		0x00,	/*	51	0x33 */ 
		0x00,	/*	52	0x34 */ 
		0x00,	/*	53	0x35 */ 
		0x00,	/*	54	0x36 */ 
		0x00,	/*	55	0x37 */ /*PN end*/
		0x00,	/*	56	0x38 */
		0x00,	/*	57	0x39 */
		0x00,	/*	58	0x3A */
		0x00,	/*	59	0x3B */
		0x95,	/*	60	0x3C */
		0x83,	/*	61	0x3D */
		0x00,	/*	62	0x3E */
		0x00,	/*	63	0x3F */
		0x00,	/*	64	0x40 */
		0x00,	/*	65	0x41 */
		0x00,	/*	66	0x42 */
		0x00,	/*	67	0x43 */
		0x00,	/*	68	0x44 */ /*0*//*SN start*/
		0x00,	/*	69	0x45 */ /*0*/
		0x00,	/*	70	0x46 */ /*0*/
		0x00,	/*	71	0x47 */ /*0*/
		0x00,	/*	72	0x48 */ /*0*/
		0x00,	/*	73	0x49 */ /*0*/
		0x00,	/*	74	0x4A */ /*0*/
		0x00,	/*	75	0x4B */ /*0*/
		0x00,	/*	76	0x4C */ /*0*/
		0x00,	/*	77	0x4D */ /*0*/
		0x00,	/*	78	0x4E */ /*0*/
		0x00,	/*	79	0x4F */ /*0*/
		0x00,	/*	80	0x50 */
		0x00,	/*	81	0x51 */
		0x00,	/*	82	0x52 */
		0x00,	/*	83	0x53 */ /* SN end */
		0x00,	/*	84	0x54 */
		0x00,	/*	85	0x55 */
		0x00,	/*	86	0x56 */
		0x00,	/*	87	0x57 */
		0x00,	/*	88	0x58 */
		0x00,	/*	89	0x59 */
		0x00,	/*	90	0x5A */
		0x00,	/*	91	0x5B */
		0x00,	/*	92	0x5C */
		0x00,	/*	93	0x5D */
		0x00,	/*	94	0x5E */
		0x00,	/*	95	0x5F */
		0x00,	/*	96	0x60 */
		0x00,	/*	97	0x61 */
		0x00,	/*	98	0x62 */
		0x00,	/*	99	0x63 */
		0x00,	/*	100	0x64 */
		0x00,	/*	101	0x65 */
		0x00,	/*	102	0x66 */
		0x00,	/*	103	0x67 */
		0x00,	/*	104	0x68 */
		0x00,	/*	105	0x69 */
		0x00,	/*	106	0x6A */
		0x00,	/*	107	0x6B */
		0x00,	/*	108	0x6C */
		0x00,	/*	109	0x6D */
		0x00,	/*	110	0x6E */
		0x00,	/*	111	0x6F */
		0x00,	/*	112	0x70 */
		0x00,	/*	113	0x71 */
		0x00,	/*	114	0x72 */
		0x00,	/*	115	0x73 */
		0x00,	/*	116	0x74 */
		0x00,	/*	117	0x75 */
		0x00,	/*	118	0x76 */
		0x00,	/*	119	0x77 */
		0x00,	/*	120	0x78 */
		0x00,	/*	121	0x79 */
		0x00,	/*	122	0x7A */
		0x00,	/*	123	0x7B */
		0x00,	/*	124	0x7C */
		0x00,	/*	125	0x7D */
		0x00,	/*	126	0x7E */
		0x00,	/*	127	0x7F */
		0x00,	/*	128	0x80 */
		0x00,	/*	129	0x81 */
		0x00,	/*	130	0x82 */
		0x00,	/*	131	0x83 */
		0x00,	/*	132	0x84 */
		0x00,	/*	133	0x85 */
		0x00,	/*	134	0x86 */
		0x00,	/*	135	0x87 */
		0x00,	/*	136	0x88 */
		0x00,	/*	137	0x89 */
		0x00,	/*	138	0x8A */
		0x00,	/*	139	0x8B */
		0x00,	/*	140	0x8C */
		0x00,	/*	141	0x8D */
		0x00,	/*	142	0x8E */
		0x00,	/*	143	0x8F */
		0x00,	/*	144	0x90 */
		0x00,	/*	145	0x91 */
		0x00,	/*	146	0x92 */
		0x00,	/*	147	0x93 */
		0x00,	/*	148	0x94 */
		0x00,	/*	149	0x95 */
		0x00,	/*	150	0x96 */
		0x00,	/*	151	0x97 */
		0x00,	/*	152	0x98 */
		0x00,	/*	153	0x99 */
		0x00,	/*	154	0x9A */
		0x00,	/*	155	0x9B */
		0x00,	/*	156	0x9C */
		0x00,	/*	157	0x9D */
		0x00,	/*	158	0x9E */
		0x00,	/*	159	0x9F */
		0x00,	/*	160	0xA0 */
		0x00,	/*	161	0xA1 */
		0x00,	/*	162	0xA2 */
		0x00,	/*	163	0xA3 */
		0x00,	/*	164	0xA4 */
		0x00,	/*	165	0xA5 */
		0x00,	/*	166	0xA6 */
		0x00,	/*	167	0xA7 */
		0x00,	/*	168	0xA8 */
		0x00,	/*	169	0xA9 */
		0x00,	/*	170	0xAA */
		0x00,	/*	171	0xAB */
		0x00,	/*	172	0xAC */
		0x00,	/*	173	0xAD */
		0x00,	/*	174	0xAE */
		0x00,	/*	175	0xAF */
		0x00,	/*	176	0xB0 */
		0x00,	/*	177	0xB1 */
		0x00,	/*	178	0xB2 */
		0x00,	/*	179	0xB3 */
		0x00,	/*	180	0xB4 */
		0x00,	/*	181	0xB5 */
		0x00,	/*	182	0xB6 */
		0x00,	/*	183	0xB7 */
		0x00,	/*	184	0xB8 */
		0x00,	/*	185	0xB9 */
		0x00,	/*	186	0xBA */
		0x00,	/*	187	0xBB */
		0x00,	/*	188	0xBC */
		0x00,	/*	189	0xBD */
		0x00,	/*	190	0xBE */
		0x00,	/*	191	0xBF */
		0x00,	/*	192	0xC0 */
		0x00,	/*	193	0xC1 */
		0x00,	/*	194	0xC2 */
		0x00,	/*	195	0xC3 */
		0x00,	/*	196	0xC4 */
		0x00,	/*	197	0xC5 */
		0x00,	/*	198	0xC6 */
		0x00,	/*	199	0xC7 */
		0x00,	/*	200	0xC8 */
		0x00,	/*	201	0xC9 */
		0x00,	/*	202	0xCA */
		0x00,	/*	203	0xCB */
		0x00,	/*	204	0xCC */
		0x00,	/*	205	0xCD */
		0x00,	/*	206	0xCE */
		0x00,	/*	207	0xCF */
		0x00,	/*	208	0xD0 */
		0x00,	/*	209	0xD1 */
		0x00,	/*	210	0xD2 */
		0x00,	/*	211	0xD3 */
		0x00,	/*	212	0xD4 */
		0x00,	/*	213	0xD5 */
		0x00,	/*	214	0xD6 */
		0x00,	/*	215	0xD7 */
		0x00,	/*	216	0xD8 */
		0x00,	/*	217	0xD9 */
		0x00,	/*	218	0xDA */
		0x00,	/*	219	0xDB */
		0x00,	/*	220	0xDC */
		0x00,	/*	221	0xDD */
		0x00,	/*	222	0xDE */
		0x00,	/*	223	0xDF */
		0x00,	/*	224	0xE0 */
		0x00,	/*	225	0xE1 */
		0x00,	/*	226	0xE2 */
		0x00,	/*	227	0xE3 */
		0x00,	/*	228	0xE4 */
		0x00,	/*	229	0xE5 */
		0x00,	/*	230	0xE6 */
		0x00,	/*	231	0xE7 */
		0x00,	/*	232	0xE8 */
		0x00,	/*	233	0xE9 */
		0x00,	/*	234	0xEA */
		0x00,	/*	235	0xEB */
		0x00,	/*	236	0xEC */
		0x00,	/*	237	0xED */
		0x00,	/*	238	0xEE */
		0x00,	/*	239	0xEF */
		0x00,	/*	240	0xF0 */
		0x00,	/*	241	0xF1 */
		0x00,	/*	242	0xF2 */
		0x00,	/*	243	0xF3 */
		0x00,	/*	244	0xF4 */
		0x00,	/*	245	0xF5 */
		0x00,	/*	246	0xF6 */
		0x00,	/*	247	0xF7 */
		0x00,	/*	248	0xF8 */
		0x00,	/*	249	0xF9 */
		0x00,	/*	250	0xFA */
		0x00,	/*	251	0xFB */
		0x00,	/*	252	0xFC */
		0x00,	/*	253	0xFD */
		0x00,	/*	254	0xFE */
		0x00	/*	255	0xFF */
};
volatile uint8_t c2[OM_TABLE_SFF_8472_DATA_LEN] =
{
		0x50,	/*	0 	0x0 */
		0x00,	/*	1	0x1 */
		0xF1,	/*	2	0x2 */
		0x00,	/*	3	0x3 */
		0x4B,	/*	4	0x4 */
		0x00,	/*	5	0x5 */
		0xF8,	/*	6	0x6 */
		0x00,	/*	7	0x7 */
		0x8D,	/*	8	0x8 */
		0xCC,	/*	9	0x9 */
		0x74,	/*	10	0xA */
		0x04,	/*	11	0xB */
		0x87,	/*	12	0xC */
		0x8C,	/*	13	0xD */
		0x7A,	/*	14	0xE */
		0x44,	/*	15	0xF */
		0xFF,	/*	16	0x10*/
		0xFF,	/*	17	0x11*/
		0xFF,	/*	18	0x12*/
		0xFF,	/*	19	0x13*/
		0xFF,	/*	20	0x14*/
		0xFF,	/*	21	0x15*/
		0xFF,	/*	22	0x16*/
		0xFF,	/*	23	0x17*/
		0x30,	/*	24	0x18*/
		0xD4,	/*	25	0x19*/
		0x06,	/*	26	0x1A*/
		0x25,	/*	27	0x1B*/
		0x26,	/*	28	0x1C*/
		0xC9,	/*	29	0x1D*/
		0x07,	/*	30	0x1E*/
		0xBD,	/*	31	0x1F*/
		0x03,	/*	32	0x20*/
		0xE8,	/*	33	0x21*/
		0x00,	/*	34	0x22*/
		0x03,	/*	35	0x23*/
		0x03,	/*	36	0x24*/
		0x1A,	/*	37	0x25*/
		0x00,	/*	38	0x26*/
		0x05,	/*	39	0x27*/
		0x00,	/*	40	0x28*/
		0x00,	/*	41	0x29*/
		0x00,	/*	42	0x2A*/
		0x00,	/*	43	0x2B*/
		0x00,	/*	44	0x2C*/
		0x00,	/*	45	0x2D*/
		0x00,	/*	46	0x2E*/
		0x00,	/*	47	0x2F*/
		0x00,	/*	48	0x30*/
		0x00,	/*	49	0x31*/
		0x00,	/*	50	0x32*/
		0x00,	/*	51	0x33*/
		0x00,	/*	52	0x34*/
		0x00,	/*	53	0x35*/
		0x00,	/*	54	0x36*/
		0x00,	/*	55	0x37*/
		0x00,	/*	56	0x38*/
		0x00,	/*	57	0x39*/
		0x00,	/*	58	0x3A*/
		0x00,	/*	59	0x3B*/
		0x00,	/*	60	0x3C*/
		0x00,	/*	61	0x3D*/
		0x00,	/*	62	0x3E*/
		0x00,	/*	63	0x3F*/
		0x00,	/*	64	0x40*/
		0x00,	/*	65	0x41*/
		0x00,	/*	66	0x42*/
		0x00,	/*	67	0x43*/
		0x3F,	/*	68	0x44*/
		0x80,	/*	69	0x45*/
		0x00,	/*	70	0x46*/
		0x00,	/*	71	0x47*/
		0x00,	/*	72	0x48*/
		0x00,	/*	73	0x49*/
		0x00,	/*	74	0x4A*/
		0x00,	/*	75	0x4B*/
		0x00,	/*	76	0x4C*/
		0x01,	/*	77	0x4D*/
		0x00,	/*	78	0x4E*/
		0x00,	/*	79	0x4F*/
		0x00,	/*	80	0x50*/
		0x01,	/*	81	0x51*/
		0x00,	/*	82	0x52*/
		0x00,	/*	83	0x53*/
		0x00,	/*	84	0x54*/
		0x01,	/*	85	0x55*/
		0x00,	/*	86	0x56*/
		0x00,	/*	87	0x57*/
		0x00,	/*	88	0x58*/
		0x01,	/*	89	0x59*/
		0x00,	/*	90	0x5A*/
		0x00,	/*	91	0x5B*/
		0x00,	/*	92	0x5C*/
		0x00,	/*	93	0x5D*/
		0x00,	/*	94	0x5E*/
		0x00,	/*	95	0x5F*/
		0xFF,	/*	96	0x60*/
		0xFF,	/*	97	0x61*/
		0xFF,	/*	98	0x62*/
		0xFF,	/*	99	0x63*/
		0x00,	/*	100	0x64*/
		0x00,	/*	101	0x65*/
		0x00,	/*	102	0x66*/
		0x00,	/*	103	0x67*/
		0x00,	/*	104	0x68*/
		0x00,	/*	105	0x69*/
		0x00,	/*	106	0x6A*/
		0x00,	/*	107	0x6B*/
		0x00,	/*	108	0x6C*/
		0x00,	/*	109	0x6D*/
		0x00,	/*	110	0x6E*/
		0x00,	/*	111	0x6F*/
		0x00,	/*	112	0x70*/
		0x00,	/*	113	0x71*/
		0x00,	/*	114	0x72*/
		0x00,	/*	115	0x73*/
		0x00,	/*	116	0x74*/
		0x00,	/*	117	0x75*/
		0x00,	/*	118	0x76*/
		0x00,	/*	119	0x77*/
		0x00,	/*	120	0x78*/
		0x00,	/*	121	0x79*/
		0x00,	/*	122	0x7A*/
		0x00,	/*	123	0x7B*/
		0x00,	/*	124	0x7C*/
		0x00,	/*	125	0x7D*/
		0x00,	/*	126	0x7E*/
		0x00,	/*	127	0x7F*/
		0x00,	/*	128	0x80*/
		0x00,	/*	129	0x81*/
		0x00,	/*	130	0x82*/
		0x00,	/*	131	0x83*/
		0x00,	/*	132	0x84*/
		0x00,	/*	133	0x85*/
		0x00,	/*	134	0x86*/
		0x00,	/*	135	0x87*/
		0x00,	/*	136	0x88*/
		0x00,	/*	137	0x89*/
		0x00,	/*	138	0x8A*/
		0x00,	/*	139	0x8B*/
		0x00,	/*	140	0x8C*/
		0x00,	/*	141	0x8D*/
		0x00,	/*	142	0x8E*/
		0x00,	/*	143	0x8F*/
		0x00,	/*	144	0x90*/
		0x00,	/*	145	0x91*/
		0x00,	/*	146	0x92*/
		0x00,	/*	147	0x93*/
		0x00,	/*	148	0x94*/
		0x00,	/*	149	0x95*/
		0x00,	/*	150	0x96*/
		0x00,	/*	151	0x97*/
		0x00,	/*	152	0x98*/
		0x00,	/*	153	0x99*/
		0x00,	/*	154	0x9A*/
		0x00,	/*	155	0x9B*/
		0x00,	/*	156	0x9C*/
		0x00,	/*	157	0x9D*/
		0x00,	/*	158	0x9E*/
		0x00,	/*	159	0x9F*/
		0x00,	/*	160	0xA0*/
		0x00,	/*	161	0xA1*/
		0x00,	/*	162	0xA2*/
		0x00,	/*	163	0xA3*/
		0x00,	/*	164	0xA4*/
		0x00,	/*	165	0xA5*/
		0x00,	/*	166	0xA6*/
		0x00,	/*	167	0xA7*/
		0x00,	/*	168	0xA8*/
		0x00,	/*	169	0xA9*/
		0x00,	/*	170	0xAA*/
		0x00,	/*	171	0xAB*/
		0x00,	/*	172	0xAC*/
		0x00,	/*	173	0xAD*/
		0x00,	/*	174	0xAE*/
		0x00,	/*	175	0xAF*/
		0x00,	/*	176	0xB0*/
		0x00,	/*	177	0xB1*/
		0x00,	/*	178	0xB2*/
		0x00,	/*	179	0xB3*/
		0x00,	/*	180	0xB4*/
		0x00,	/*	181	0xB5*/
		0x00,	/*	182	0xB6*/
		0x00,	/*	183	0xB7*/
		0x00,	/*	184	0xB8*/
		0x00,	/*	185	0xB9*/
		0x00,	/*	186	0xBA*/
		0x00,	/*	187	0xBB*/
		0x00,	/*	188	0xBC*/
		0x00,	/*	189	0xBD*/
		0x00,	/*	190	0xBE*/
		0x00,	/*	191	0xBF*/
		0x00,	/*	192	0xC0*/
		0x00,	/*	193	0xC1*/
		0x00,	/*	194	0xC2*/
		0x00,	/*	195	0xC3*/
		0x00,	/*	196	0xC4*/
		0x00,	/*	197	0xC5*/
		0x00,	/*	198	0xC6*/
		0x00,	/*	199	0xC7*/
		0x00,	/*	200	0xC8*/
		0x00,	/*	201	0xC9*/
		0x00,	/*	202	0xCA*/
		0x00,	/*	203	0xCB*/
		0x00,	/*	204	0xCC*/
		0x00,	/*	205	0xCD*/
		0x00,	/*	206	0xCE*/
		0x00,	/*	207	0xCF*/
		0x00,	/*	208	0xD0*/
		0x00,	/*	209	0xD1*/
		0x00,	/*	210	0xD2*/
		0x00,	/*	211	0xD3*/
		0x00,	/*	212	0xD4*/
		0x00,	/*	213	0xD5*/
		0x00,	/*	214	0xD6*/
		0x00,	/*	215	0xD7*/
		0x00,	/*	216	0xD8*/
		0x00,	/*	217	0xD9*/
		0x00,	/*	218	0xDA*/
		0x00,	/*	219	0xDB*/
		0x00,	/*	220	0xDC*/
		0x00,	/*	221	0xDD*/
		0x00,	/*	222	0xDE*/
		0x00,	/*	223	0xDF*/
		0x00,	/*	224	0xE0*/
		0x00,	/*	225	0xE1*/
		0x00,	/*	226	0xE2*/
		0x00,	/*	227	0xE3*/
		0x00,	/*	228	0xE4*/
		0x00,	/*	229	0xE5*/
		0x00,	/*	230	0xE6*/
		0x00,	/*	231	0xE7*/
		0x00,	/*	232	0xE8*/
		0x00,	/*	233	0xE9*/
		0x00,	/*	234	0xEA*/
		0x00,	/*	235	0xEB*/
		0x00,	/*	236	0xEC*/
		0x00,	/*	237	0xED*/
		0x00,	/*	238	0xEE*/
		0x00,	/*	239	0xEF*/
		0x00,	/*	240	0xF0*/
		0x00,	/*	241	0xF1*/
		0x00,	/*	242	0xF2*/
		0x00,	/*	243	0xF3*/
		0x00,	/*	244	0xF4*/
		0x00,	/*	245	0xF5*/
		0x00,	/*	246	0xF6*/
		0x00,	/*	247	0xF7*/
		0x00,	/*	248	0xF8*/
		0x00,	/*	249	0xF9*/
		0x00,	/*	250	0xFA*/
		0x00,	/*	251	0xFB*/
		0x00,	/*	252	0xFC*/
		0x00,	/*	253	0xFD*/
		0x00,	/*	254	0xFE*/
		0x00	/*	255	0xFF*/
};


const volatile RSSI_POWER rssi_to_rxpower_50g[RSSI_TO_RXPOWER_COUNT] =
{
/* 50G单模RSSI映射接收光功率参数
{	526	,	-40.00 	},
{	534	,	-35.00 	},
{	542	,	-30.00 	},
{	550	,	-25.00 	},
{	558	,	-24.03 	},
{	563	,	-23.20 	},
{	568	,	-22.18 	},
{	576	,	-21.22 	},
{	588	,	-20.27 	},
{	596	,	-19.36 	},
{	614	,	-18.40 	},
{	627	,	-17.50 	},
{	652	,	-16.50 	},
{	676	,	-15.55 	},
{	707	,	-14.62 	},
{	748	,	-13.68 	},
{	789	,	-12.78 	},
{	847	,	-11.85 	},
{	913	,	-10.87 	},
{	994	,	-9.95 	},
{	1183	,	-9.00 	},
{	1188	,	-8.22 	},
{	1325	,	-7.25 	},
{	1385	,	-6.34 	},
{	1407	,	-5.49 	},
{	1420	,	-4.99 	}
*/
/* 50G三模RSSI映射接收光功率参数*/
{226,	-33.4},
{231,	-32.3},
{233,	-30.4},
{237,	-29.3},
{245,	-28  },
{255,	-26.5},
{284,	-24  },
{312,	-22.2},
{355,	-20.3},
{430,	-18.5},
{527,	-16.6},
{678,	-14.6},
{884,	-12.6},
{1182,	-10.8},
{1365,	-8.8 },
{1410,	-6.9 }

};
const volatile RSSI_POWER rssi_to_rxpower_10g[RSSI_TO_RXPOWER_COUNT] =
{
/* 10G三模RSSI映射接收光功率参数*/
{235,	-31.2},
{238,	-29.6},
{253,	-28.1},
{494,	-26.5},
{507,	-24.8},
{509,	-23.0},
{510,	-21.1},
{741,	-19.2},
{767,	-17.3},
{1022,	-15.4},
{1262,	-13.4},
{1524,	-11.5},
{1532,	-9.6 },
{1535,	-7.7 },
{1536,	-6.7 },
{1537,	-6.1 }
};
const volatile RSSI_POWER rssi_to_rxpower_1g[RSSI_TO_RXPOWER_COUNT] =
{
/* 1G三模RSSI映射接收光功率参数*/
{251,	-33.6},
{255,	-32  },
{300,	-31.4},
{507,	-30.8},
{509,	-29  },
{511,	-27.6},
{513,	-26.0},
{514,	-24.3},
{515,	-21.9},
{765,	-20.2},
{767,	-18.6},
{768,	-16.7},
{1019,	-15.4},
{1073,	-14.1},
{1279,	-11.8},
{1535,	-9.9 }
};




/***********************************************************************
	** 函 数 名： update_om_temperature
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： void
	** 功能描述： 更新光模块的温度
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_temperature()
{
	float temperature = 0.0;
	uint16_t code = 0x0000;

	
	get_case_therm_temperature(&temperature);

	if(temperature > 0.01)
	{
		code = temperature * TEMPERATURE_ACCURACY_FACTOR;
	}
	else if(temperature < -0.01)
	{
		code = -temperature * TEMPERATURE_ACCURACY_FACTOR;
		code = ~code + 1;
	}
	else
	{
		code = 0;
	}
	
	a2[OM_A2_ADDR_TEMPERATURE] = (uint8_t)(code >> 8);
	a2[OM_A2_ADDR_TEMPERATURE + 1] = (uint8_t)(code);
	
	b2[OM_A2_ADDR_TEMPERATURE] = (uint8_t)(code >> 8);
	b2[OM_A2_ADDR_TEMPERATURE + 1] = (uint8_t)(code);
	
	c2[OM_A2_ADDR_TEMPERATURE] = (uint8_t)(code >> 8);
	c2[OM_A2_ADDR_TEMPERATURE + 1] = (uint8_t)(code);

	
}
/***********************************************************************
	** 函 数 名： update_om_voltage
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： void
	** 功能描述： 更新光模块的电压
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_voltage()
{
	float vcc = 0.0;
	uint16_t code = 0x0000;

	if(~(a2[OM_A2_TX_STATE] & (1 << 6))){
		ddm_50g_get_voltage(&vcc);
		code = vcc * VOLTAGE_ACCURACY_FACTOR;
		a2[OM_A2_ADDR_VOLTAGE] = (uint8_t)(code >> 8);
		a2[OM_A2_ADDR_VOLTAGE + 1] = (uint8_t)(code);
	}

	if(~(b2[OM_A2_TX_STATE] & (1 << 6))){
		
		ddm_10g_get_voltage(&vcc);
		code = vcc * VOLTAGE_ACCURACY_FACTOR;
		b2[OM_A2_ADDR_VOLTAGE] = (uint8_t)(code >> 8);
		b2[OM_A2_ADDR_VOLTAGE + 1] = (uint8_t)(code);
	}

	if(~(c2[OM_A2_TX_STATE] & (1 << 6))){
		ddm_1g_get_voltage(&vcc);
		code = vcc * VOLTAGE_ACCURACY_FACTOR;
		c2[OM_A2_ADDR_VOLTAGE] = (uint8_t)(code >> 8);
		c2[OM_A2_ADDR_VOLTAGE + 1] = (uint8_t)(code);
	}

}

/***********************************************************************
	** 函 数 名： update_om_bias
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： void
	** 功能描述： 更新光模块的偏置电流
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_bias()
{
	float ibias = 0.0;
	uint16_t code = 0x0000;
	
	if(~(a2[OM_A2_TX_STATE] & (1 << 6))){
		ddm_50g_get_ld_ibias(&ibias);
     
		
		code = ibias * BIAS_ACCURACY_FACTOR;
		
		a2[OM_A2_ADDR_BIAS] = (uint8_t)(code >> 8);
		a2[OM_A2_ADDR_BIAS + 1] = (uint8_t)(code);
	}
	
	if(~(b2[OM_A2_TX_STATE] & (1 << 6))){
		ddm_10g_get_ld_ibias(&ibias);
		
		code = ibias * BIAS_ACCURACY_FACTOR;
		
		b2[OM_A2_ADDR_BIAS] = (uint8_t)(code >> 8);
		b2[OM_A2_ADDR_BIAS + 1] = (uint8_t)(code);
	}
	
	if(~(c2[OM_A2_TX_STATE] & (1 << 6))){
		ddm_1g_get_ld_ibias(&ibias);
		
		code = ibias * BIAS_ACCURACY_FACTOR;
		
		c2[OM_A2_ADDR_BIAS] = (uint8_t)(code >> 8);
		c2[OM_A2_ADDR_BIAS + 1] = (uint8_t)(code);
	}
	
}
/***********************************************************************
	** 函 数 名： update_om_tx_power
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： void
	** 功能描述： 更新光模块的发送光功率
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_tx_power()
{
	if(~(a2[OM_A2_TX_STATE] & (1 << 6))){
		float txpower_dBm = calculate_om_tx_power(SFF_50G_TYPE);
		float txpower_mW = pow(10, txpower_dBm / 10);
		uint16_t code = 0x0000;
		code = txpower_mW * TXPOWER_ACCURACY_FACTOR;

		a2[OM_A2_ADDR_TXPOWER] = (uint8_t)(code >> 8);
		a2[OM_A2_ADDR_TXPOWER + 1] = (uint8_t)(code);
	}
	
	if(~(b2[OM_A2_TX_STATE] & (1 << 6))){
		float txpower_dBm = calculate_om_tx_power(SFF_10G_TYPE);
		float txpower_mW = pow(10, txpower_dBm / 10);
		uint16_t code = 0x0000;
		code = txpower_mW * TXPOWER_ACCURACY_FACTOR;

		b2[OM_A2_ADDR_TXPOWER] = (uint8_t)(code >> 8);
		b2[OM_A2_ADDR_TXPOWER + 1] = (uint8_t)(code);
	}
	
	if(~(c2[OM_A2_TX_STATE] & (1 << 6))){
		float txpower_dBm = calculate_om_tx_power(SFF_1G_TYPE);
		float txpower_mW = pow(10, txpower_dBm / 10);
		uint16_t code = 0x0000;
		code = txpower_mW * TXPOWER_ACCURACY_FACTOR;

		c2[OM_A2_ADDR_TXPOWER] = (uint8_t)(code >> 8);
		c2[OM_A2_ADDR_TXPOWER + 1] = (uint8_t)(code);
	}
	
}
/***********************************************************************
	** 函 数 名： update_om_rx_power
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： void
	** 功能描述： 更新光模块的接收光功率
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_rx_power()
{
	float rxpower_dBm;
	float rxpower_mW;
	uint16_t code;

	rxpower_dBm = calculate_om_rx_power(SFF_50G_TYPE);
	rxpower_mW = pow(10, rxpower_dBm / 10);
	code = 0x0000;
	code = rxpower_mW * RXPOWER_ACCURACY_FACTOR;

	a2[OM_A2_ADDR_RXPOWER] = (uint8_t)(code >> 8);
	a2[OM_A2_ADDR_RXPOWER + 1] = (uint8_t)(code);

	rxpower_dBm = calculate_om_rx_power(SFF_10G_TYPE);
	rxpower_mW = pow(10, rxpower_dBm / 10);
	code = 0x0000;
	code = rxpower_mW * RXPOWER_ACCURACY_FACTOR;

	b2[OM_A2_ADDR_RXPOWER] = (uint8_t)(code >> 8);
	b2[OM_A2_ADDR_RXPOWER + 1] = (uint8_t)(code);


	rxpower_dBm = calculate_om_rx_power(SFF_1G_TYPE);
	rxpower_mW = pow(10, rxpower_dBm / 10);
	code = 0x0000;
	code = rxpower_mW * RXPOWER_ACCURACY_FACTOR;

	c2[OM_A2_ADDR_RXPOWER] = (uint8_t)(code >> 8);
	c2[OM_A2_ADDR_RXPOWER + 1] = (uint8_t)(code);

}
/***********************************************************************
	** 函 数 名： calculate_om_tx_power
	** 输    入： uint8_t pon_rate：0代表50g 1代表10g 2代表1g
	** 输    出： 无
	** 返 回 值： float
	** 功能描述： 线性转换计算光模块的发送光功率
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
float calculate_om_tx_power(uint8_t pon_rate)
{
	float ibias = 0.0;
	float txpower = 0.0;
	float slope = 0.0;
	float offset = 0.0;
	double adc_out_norm = 0;
	
	if(pon_rate == 0){
		slope = om_default_config.tx_pwr_slope_0;// 外校准获得并更新
		offset = om_default_config.tx_pwr_offset_0;// 外校准获得并更新
		
		ddm_50g_get_mpd_ibias(&ibias);
		
		adc_out_norm = ADC_OUT_NORM * ddm_adc_out_val.tx_power_adc_out_0 / ADC_OUT_BIT_NUMBER;
	}
	else if(pon_rate == 1){// 10g斜率和截距待更新
		slope = om_default_config.tx_pwr_slope_1;// 外校准获得并更新
		offset = om_default_config.tx_pwr_offset_1;// 外校准获得并更新
		
		ddm_10g_get_mpd_ibias(&ibias);
		
		adc_out_norm = ADC_OUT_NORM * ddm_adc_out_val.tx_power_adc_out_1 / ADC_OUT_BIT_NUMBER;
	}
	else if(pon_rate == 2){// 1g斜率和截距待更新
		slope = om_default_config.tx_pwr_slope_2;
		offset = om_default_config.tx_pwr_offset_2;
		//ux3326_get_mpd_ibias(&ibias);
		ddm_1g_get_mpd_ibias(&ibias);

		adc_out_norm = ADC_OUT_NORM * ddm_adc_out_val.tx_power_adc_out_2 / ADC_OUT_BIT_NUMBER;
	}
	
	txpower = slope * adc_out_norm + offset;
	
	if(txpower <= 0)
	{
		txpower = 0.0001;
	}
	
	txpower = 10*log10(txpower);
	return txpower;
	
}
/***********************************************************************
	** 函 数 名： calculate_om_rx_power
	** 输    入： uint8_t pon_rate：0代表50g 1代表10g 2代表1g
	** 输    出： 无
	** 返 回 值： float
	** 功能描述： 线性转换计算光模块的接收光功率
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
float calculate_om_rx_power(uint8_t pon_rate)
{
	uint16_t rssi = 0;
	float a; // 指数拟合的系数
	float b;
	float c;
	float rssi_norm; // rssi归一化处理: rssi / 160
	float rxpower_exp; // 指数拟合得到的值
	float rxpower_mw;
	float rxpower_dbm;

#if 1
	/*接收光功率rxpower_mw由指数拟合y = a*exp(x/b)+c获取*/
	if(pon_rate == SFF_50G_TYPE){
		a = om_default_config.rx_pwr_a_0;
		b = om_default_config.rx_pwr_b_0;
		c = om_default_config.rx_pwr_c_0;

		ddm_50g_get_rssi_value(&rssi);	
	}
	else if (pon_rate == SFF_10G_TYPE){
		a = om_default_config.rx_pwr_a_1;
		b = om_default_config.rx_pwr_b_1;
		c = om_default_config.rx_pwr_c_1;

		ddm_10g_get_rssi_value(&rssi);

	}
	else if (pon_rate == SFF_1G_TYPE){
		a = om_default_config.rx_pwr_a_2;
		b = om_default_config.rx_pwr_b_2;
		c = om_default_config.rx_pwr_c_2;

		// 处理RSSI: rssi/160
		ddm_1g_get_rssi_value(&rssi);	
	}
	
	// 处理RSSI: rssi/160
	rssi_norm = rssi / 160.0;
	
	// 通过指数公式计算rx_power，计算的值为实际功率值*100，实际功率值需要除100
	rxpower_exp = a * exp(rssi_norm / b) + c;
	rxpower_mw = rxpower_exp / 100;		

	if(rxpower_mw < RX_PWR_MIN_MW){
		rxpower_mw = RX_PWR_MIN_MW;
	}
	
	// 计算对应的dBm值
	rxpower_dbm= 10*log10(rxpower_mw);//dBm

	return rxpower_dbm;
	
#endif


#if 0
	float k;
	uint8_t i = 0;
	float rxpower;

	if(pon_rate == SFF_50G_TYPE){
		ddm_50g_get_rssi_value(&rssi);
		
		if(rssi < rssi_to_rxpower_50g[0].rssi)
		{
			rxpower = -40.00;
		}
		else if(rssi >= rssi_to_rxpower_50g[RSSI_TO_RXPOWER_COUNT-1].rssi)
		{
			rxpower = -5.00;
		}
		else
		{
			for(i=0;i<RSSI_TO_RXPOWER_COUNT-1;i++)
			{
				if(rssi == rssi_to_rxpower_50g[i].rssi)
				{
					rxpower = rssi_to_rxpower_50g[i].power;
					break;
				}
				else if((rssi > rssi_to_rxpower_50g[i].rssi) && (rssi < rssi_to_rxpower_50g[i + 1].rssi))
				{
					k = (rssi_to_rxpower_50g[i + 1].power - rssi_to_rxpower_50g[i].power) / (rssi_to_rxpower_50g[i + 1].rssi - rssi_to_rxpower_50g[i].rssi);
					rxpower = k * (rssi - rssi_to_rxpower_50g[i].rssi) + rssi_to_rxpower_50g[i].power;
					break;
				}
			}
	 	}	
	}
	
	if(pon_rate == SFF_10G_TYPE){
		ddm_10g_get_rssi_value(&rssi);
		
		if(rssi < rssi_to_rxpower_10g[0].rssi)
		{
			rxpower = -40.00;
		}
		else if(rssi >= rssi_to_rxpower_10g[RSSI_TO_RXPOWER_COUNT-1].rssi)
		{
			rxpower = -5.00;
		}
		else
		{
			for(i=0;i<RSSI_TO_RXPOWER_COUNT-1;i++)
			{
				if(rssi == rssi_to_rxpower_10g[i].rssi)
				{
					rxpower = rssi_to_rxpower_10g[i].power;
					break;
				}
				else if((rssi > rssi_to_rxpower_10g[i].rssi) && (rssi < rssi_to_rxpower_10g[i + 1].rssi))
				{
					k = (rssi_to_rxpower_10g[i + 1].power - rssi_to_rxpower_10g[i].power) / (rssi_to_rxpower_10g[i + 1].rssi - rssi_to_rxpower_10g[i].rssi);
					rxpower = k * (rssi - rssi_to_rxpower_10g[i].rssi) + rssi_to_rxpower_10g[i].power;
					break;
				}
			}
	 	}	
	}

	if(pon_rate == SFF_1G_TYPE){
		ddm_1g_get_rssi_value(&rssi);
      
		if(rssi < rssi_to_rxpower_1g[0].rssi)
		{
			rxpower = -40.00;
		}
		else if(rssi >= rssi_to_rxpower_1g[RSSI_TO_RXPOWER_COUNT-1].rssi)
		{
			rxpower = -5.00;
		}
		else
		{
			for(i=0;i<RSSI_TO_RXPOWER_COUNT-1;i++)
			{
				if(rssi == rssi_to_rxpower_1g[i].rssi)
				{
					rxpower = rssi_to_rxpower_1g[i].power;
					break;
				}
				else if((rssi > rssi_to_rxpower_1g[i].rssi) && (rssi < rssi_to_rxpower_1g[i + 1].rssi))
				{
					k = (rssi_to_rxpower_1g[i + 1].power - rssi_to_rxpower_1g[i].power) / (rssi_to_rxpower_1g[i + 1].rssi - rssi_to_rxpower_1g[i].rssi);
					rxpower = k * (rssi - rssi_to_rxpower_1g[i].rssi) + rssi_to_rxpower_1g[i].power;
					break;
				}
			}
	 	}	
	}
	if(rxpower <= 0){
		rxpower = 0.0001;
	}
	// 计算对应的dBm值
	rxpower = 10*log10(rxpower);//dBm

	return rxpower;
#endif
	
}




/***********************************************************************
	** 函 数 名： update_om_diagnose
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： 无
	** 功能描述： 在定时器作用下更新光模块的数字诊断信息
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_diagnose()
{
	/* add by fz, 20250303, 原因:升级时g_update_process_flag置为SET 
	,升级完成后仍为set,待重启后恢复到RESET*/
	if(RESET == g_mcu_vars_param.g_update_process_flag)
	{
		update_om_temperature();
	
	}
	if(RESET == g_mcu_vars_param.g_update_process_flag)
	{
		update_om_voltage();
	
	}
	if(RESET == g_mcu_vars_param.g_update_process_flag)
	{
		update_om_bias();
		
	}

	if(RESET == g_mcu_vars_param.g_update_process_flag)
	{
		update_om_tx_power();
	
	}

	if(RESET == g_mcu_vars_param.g_update_process_flag)
	{
		update_om_rx_power();
	
	}
	
}

/***********************************************************************
	** 函 数 名： update_om_warning
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： 无
	** 功能描述： 在定时器作用下更新光模块的告警信息
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void update_om_warning()
{
	a2[OM_A2_DDM_ALARM] = 0x00;
	a2[OM_A2_DDM_ALARM + 1] = 0x00;
	a2[OM_A2_DDM_WARNING] = 0x00;
	a2[OM_A2_DDM_WARNING + 1] = 0x00;

	b2[OM_A2_DDM_ALARM] = 0x00;
	b2[OM_A2_DDM_ALARM + 1] = 0x00;
	b2[OM_A2_DDM_WARNING] = 0x00;
	b2[OM_A2_DDM_WARNING + 1] = 0x00;

	c2[OM_A2_DDM_ALARM] = 0x00;
	c2[OM_A2_DDM_ALARM + 1] = 0x00;
	c2[OM_A2_DDM_WARNING] = 0x00;
	c2[OM_A2_DDM_WARNING + 1] = 0x00;
	
	uint16_t temp_high_alarm = a2[OM_A2_TEMP_HIGH_ALARM] * 256 + a2[OM_A2_TEMP_HIGH_ALARM + 1];
	uint16_t temp_low_alarm = a2[OM_A2_TEMP_LOW_ALARM] * 256 + a2[OM_A2_TEMP_LOW_ALARM + 1];
	uint16_t temp_high_warning = a2[OM_A2_TEMP_HIGH_WARNING] * 256 + a2[OM_A2_TEMP_HIGH_WARNING + 1];
	uint16_t temp_low_warning = a2[OM_A2_TEMP_LOW_WARNING] * 256 + a2[OM_A2_TEMP_LOW_WARNING + 1];
	uint16_t temp = a2[OM_A2_ADDR_TEMPERATURE] * 256 + a2[OM_A2_ADDR_TEMPERATURE + 1];
	
	if(a2[OM_A2_ADDR_TEMPERATURE] & 0x80){//负数
		if(temp < temp_low_alarm){
			a2[OM_A2_DDM_ALARM] |= (1 << 6);// bit6置1
			a2[OM_A2_DDM_ALARM] &= ~(1 << 7);// bit7置0

			b2[OM_A2_DDM_ALARM] |= (1 << 6);// bit6置1
			b2[OM_A2_DDM_ALARM] &= ~(1 << 7);// bit7置0

			c2[OM_A2_DDM_ALARM] |= ~(1 << 6);// bit6置1
			c2[OM_A2_DDM_ALARM] &= (1 << 7);// bit7置0
		}
		else{
			if(temp < temp_low_warning){
				a2[OM_A2_DDM_WARNING] |= (1 << 6);// bit6置1
				a2[OM_A2_DDM_WARNING] &= ~(1 << 7);// bit7置0

				b2[OM_A2_DDM_WARNING] |= (1 << 6);// bit6置1
				b2[OM_A2_DDM_WARNING] &= ~(1 << 7);// bit7置0

				c2[OM_A2_DDM_WARNING] |= (1 << 6);// bit6置1
				c2[OM_A2_DDM_WARNING] &= ~(1 << 7);// bit7置0
			}
		}
		
	}
	else{
		if(temp > temp_high_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 6);//bit6置0
			a2[OM_A2_DDM_ALARM] |= (1 << 7);//bit7置1

			b2[OM_A2_DDM_ALARM] &= ~(1 << 6);//bit6置0
			b2[OM_A2_DDM_ALARM] |= (1 << 7);//bit7置1

			c2[OM_A2_DDM_ALARM] &= ~(1 << 6);//bit6置0
			c2[OM_A2_DDM_ALARM] |= (1 << 7);//bit7置1
		}
		else{
			if(temp > temp_high_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 6);//bit6置0
				a2[OM_A2_DDM_WARNING] |= (1 << 7);//bit7置1

				b2[OM_A2_DDM_WARNING] &= ~(1 << 6);//bit6置0
				b2[OM_A2_DDM_WARNING] |= (1 << 7);//bit7置1

				c2[OM_A2_DDM_WARNING] &= ~(1 << 6);//bit6置0
				c2[OM_A2_DDM_WARNING] |= (1 << 7);//bit7置1
			}
		}

	}

	if(~(a2[OM_A2_TX_STATE] & (1 << 6))){
		uint16_t voltage_high_alarm = a2[OM_A2_VOLTAGE_HIGH_ALARM] * 256 + a2[OM_A2_VOLTAGE_HIGH_ALARM + 1];
		uint16_t voltage_low_alarm = a2[OM_A2_VOLTAGE_LOW_ALARM] * 256 + a2[OM_A2_VOLTAGE_LOW_ALARM + 1];
		uint16_t voltage_high_warning = a2[OM_A2_VOLTAGE_HIGH_WARNING] * 256 + a2[OM_A2_VOLTAGE_HIGH_WARNING + 1];
		uint16_t voltage_low_warning = a2[OM_A2_VOLTAGE_LOW_WARNING] * 256 + a2[OM_A2_VOLTAGE_LOW_WARNING + 1];
		uint16_t voltage = a2[OM_A2_ADDR_VOLTAGE] * 256 + a2[OM_A2_ADDR_VOLTAGE + 1];
		
		if(voltage > voltage_high_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 4);
			a2[OM_A2_DDM_ALARM] |= (1 << 5);
		}
		else{
			if(voltage > voltage_high_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 4);
				a2[OM_A2_DDM_WARNING] |= (1 << 5);
			}
		}
		if(voltage < voltage_low_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 5);
			a2[OM_A2_DDM_ALARM] |= (1 << 4);
		}
		else{
			if(voltage < voltage_low_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 5);
				a2[OM_A2_DDM_WARNING] |= (1 << 4);
			}
		}

		uint16_t bias_high_alarm = a2[OM_A2_BIAS_HIGH_ALARM] * 256 + a2[OM_A2_BIAS_HIGH_ALARM + 1];
		uint16_t bias_low_alarm = a2[OM_A2_BIAS_LOW_ALARM] * 256 + a2[OM_A2_BIAS_LOW_ALARM + 1];
		uint16_t bias_high_warning = a2[OM_A2_BIAS_HIGH_WARNING] * 256 + a2[OM_A2_BIAS_HIGH_WARNING + 1];
		uint16_t bias_low_warning = a2[OM_A2_BIAS_LOW_WARNING] * 256 + a2[OM_A2_BIAS_LOW_WARNING + 1];
		uint16_t bias = a2[OM_A2_ADDR_BIAS] * 256 + a2[OM_A2_ADDR_BIAS + 1];
		
		if(bias > bias_high_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 2);
			a2[OM_A2_DDM_ALARM] |= (1 << 3);
		}
		else{
			if(bias > bias_high_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 2);
				a2[OM_A2_DDM_WARNING] |= (1 << 3);
			}
		}
		if(bias < bias_low_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 3);
			a2[OM_A2_DDM_ALARM] |= (1 << 2);
		}
		else{
			if(bias < bias_low_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 3);
				a2[OM_A2_DDM_WARNING] |= (1 << 2);
			}
		}
		
		uint16_t txpower_high_alarm = a2[OM_A2_TXPOWER_HIGH_ALARM] * 256 + a2[OM_A2_TXPOWER_HIGH_ALARM + 1];
		uint16_t txpower_low_alarm = a2[OM_A2_TXPOWER_LOW_ALARM] * 256 + a2[OM_A2_TXPOWER_LOW_ALARM + 1];
		uint16_t txpower_high_warning = a2[OM_A2_TXPOWER_HIGH_WARNING] * 256 + a2[OM_A2_TXPOWER_HIGH_WARNING + 1];
		uint16_t txpower_low_warning = a2[OM_A2_TXPOWER_LOW_WARNING] * 256 + a2[OM_A2_TXPOWER_LOW_WARNING + 1];
		uint16_t txpower = a2[OM_A2_ADDR_TXPOWER] * 256 + a2[OM_A2_ADDR_TXPOWER + 1];
		
		if(txpower > txpower_high_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 0);
			a2[OM_A2_DDM_ALARM] |= (1 << 1);
		}
		else{
			if(txpower > txpower_high_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 0);
				a2[OM_A2_DDM_WARNING] |= (1 << 1);
			}
		}
		if(txpower < txpower_low_alarm){
			a2[OM_A2_DDM_ALARM] &= ~(1 << 1);
			a2[OM_A2_DDM_ALARM] |= (1 << 0);
		}
		else{
			if(txpower < txpower_low_warning){
				a2[OM_A2_DDM_WARNING] &= ~(1 << 1);
				a2[OM_A2_DDM_WARNING] |= (1 << 0);
			}
		}
		
		uint16_t rxpower_high_alarm = a2[OM_A2_RXPOWER_HIGH_ALARM] * 256 + a2[OM_A2_RXPOWER_HIGH_ALARM + 1];
		uint16_t rxpower_low_alarm = a2[OM_A2_RXPOWER_LOW_ALARM] * 256 + a2[OM_A2_RXPOWER_LOW_ALARM + 1];
		uint16_t rxpower_high_warning = a2[OM_A2_RXPOWER_HIGH_WARNING] * 256 + a2[OM_A2_RXPOWER_HIGH_WARNING + 1];
		uint16_t rxpower_low_warning = a2[OM_A2_RXPOWER_LOW_WARNING] * 256 + a2[OM_A2_RXPOWER_LOW_WARNING + 1];
		uint16_t rxpower = a2[OM_A2_ADDR_RXPOWER] * 256 + a2[OM_A2_ADDR_RXPOWER + 1];
		
		if(rxpower > rxpower_high_alarm){
			a2[OM_A2_DDM_ALARM + 1] &= ~(1 << 6);
			a2[OM_A2_DDM_ALARM + 1] |= (1 << 7);
		}
		else{
			if(rxpower > rxpower_high_warning){
				a2[OM_A2_DDM_WARNING + 1] &= ~(1 << 6);
				a2[OM_A2_DDM_WARNING + 1] |= (1 << 7);
			}
		}
		if(rxpower < rxpower_low_alarm){
			a2[OM_A2_DDM_ALARM + 1] &= ~(1 << 7);
			a2[OM_A2_DDM_ALARM + 1] |= (1 << 6);
		}
		else{
			if(rxpower < rxpower_low_warning){
				a2[OM_A2_DDM_WARNING + 1] &= ~(1 << 7);
				a2[OM_A2_DDM_WARNING + 1] |= (1 << 6);
			}
		}		
	}
	if(~(b2[OM_A2_TX_STATE] & (1 << 6))){
		uint16_t voltage_high_alarm = b2[OM_A2_VOLTAGE_HIGH_ALARM] * 256 + b2[OM_A2_VOLTAGE_HIGH_ALARM + 1];
		uint16_t voltage_low_alarm = b2[OM_A2_VOLTAGE_LOW_ALARM] * 256 + b2[OM_A2_VOLTAGE_LOW_ALARM + 1];
		uint16_t voltage_high_warning = b2[OM_A2_VOLTAGE_HIGH_WARNING] * 256 + b2[OM_A2_VOLTAGE_HIGH_WARNING + 1];
		uint16_t voltage_low_warning = b2[OM_A2_VOLTAGE_LOW_WARNING] * 256 + b2[OM_A2_VOLTAGE_LOW_WARNING + 1];
		uint16_t voltage = b2[OM_A2_ADDR_VOLTAGE] * 256 + b2[OM_A2_ADDR_VOLTAGE + 1];
		
		if(voltage > voltage_high_alarm){
			b2[OM_A2_DDM_ALARM] &= ~(1 << 4);
			b2[OM_A2_DDM_ALARM] |= (1 << 5);
		}
		else{
			if(voltage > voltage_high_warning){
				b2[OM_A2_DDM_WARNING] &= ~(1 << 4);
				b2[OM_A2_DDM_WARNING] |= (1 << 5);
			}
		}
		if(voltage < voltage_low_alarm){
			b2[OM_A2_DDM_ALARM] &= ~(1 << 5);
			b2[OM_A2_DDM_ALARM] |= (1 << 4);
		}
		else{
			if(voltage < voltage_low_warning){
				b2[OM_A2_DDM_WARNING] &= ~(1 << 5);
				b2[OM_A2_DDM_WARNING] |= (1 << 4);
			}
		}
		
		uint16_t bias_high_alarm = b2[OM_A2_BIAS_HIGH_ALARM] * 256 + b2[OM_A2_BIAS_HIGH_ALARM + 1];
		uint16_t bias_low_alarm = b2[OM_A2_BIAS_LOW_ALARM] * 256 + b2[OM_A2_BIAS_LOW_ALARM + 1];
		uint16_t bias_high_warning = b2[OM_A2_BIAS_HIGH_WARNING] * 256 + b2[OM_A2_BIAS_HIGH_WARNING + 1];
		uint16_t bias_low_warning = b2[OM_A2_BIAS_LOW_WARNING] * 256 + b2[OM_A2_BIAS_LOW_WARNING + 1];
		uint16_t bias = b2[OM_A2_ADDR_BIAS] * 256 + b2[OM_A2_ADDR_BIAS + 1];
		
		if(bias > bias_high_alarm){
			b2[OM_A2_DDM_ALARM] &= ~(1 << 2);
			b2[OM_A2_DDM_ALARM] |= (1 << 3);
		}
		else{
			if(bias > bias_high_warning){
				b2[OM_A2_DDM_WARNING] &= ~(1 << 2);
				b2[OM_A2_DDM_WARNING] |= (1 << 3);
			}
		}
		if(bias < bias_low_alarm){
			b2[OM_A2_DDM_ALARM] &= ~(1 << 3);
			b2[OM_A2_DDM_ALARM] |= (1 << 2);
		}
		else{
			if(bias < bias_low_warning){
				b2[OM_A2_DDM_WARNING] &= ~(1 << 3);
				b2[OM_A2_DDM_WARNING] |= (1 << 2);
			}
		}
		
		uint16_t txpower_high_alarm = b2[OM_A2_TXPOWER_HIGH_ALARM] * 256 + b2[OM_A2_TXPOWER_HIGH_ALARM + 1];
		uint16_t txpower_low_alarm = b2[OM_A2_TXPOWER_LOW_ALARM] * 256 + b2[OM_A2_TXPOWER_LOW_ALARM + 1];
		uint16_t txpower_high_warning = b2[OM_A2_TXPOWER_HIGH_WARNING] * 256 + b2[OM_A2_TXPOWER_HIGH_WARNING + 1];
		uint16_t txpower_low_warning = b2[OM_A2_TXPOWER_LOW_WARNING] * 256 + b2[OM_A2_TXPOWER_LOW_WARNING + 1];
		uint16_t txpower = b2[OM_A2_ADDR_TXPOWER] * 256 + b2[OM_A2_ADDR_TXPOWER + 1];
		
		if(txpower > txpower_high_alarm){
			b2[OM_A2_DDM_ALARM] &= ~(1 << 0);
			b2[OM_A2_DDM_ALARM] |= (1 << 1);
		}
		else{
			if(txpower > txpower_high_warning){
				b2[OM_A2_DDM_WARNING] &= ~(1 << 0);
				b2[OM_A2_DDM_WARNING] |= (1 << 1);
			}
		}
		if(txpower < txpower_low_alarm){
			b2[OM_A2_DDM_ALARM] &= ~(1 << 1);
			b2[OM_A2_DDM_ALARM] |= (1 << 0);
		}
		else{
			if(txpower < txpower_low_warning){
				b2[OM_A2_DDM_WARNING] &= ~(1 << 1);
				b2[OM_A2_DDM_WARNING] |= (1 << 0);
			}
		}
		
		uint16_t rxpower_high_alarm = b2[OM_A2_RXPOWER_HIGH_ALARM] * 256 + b2[OM_A2_RXPOWER_HIGH_ALARM + 1];
		uint16_t rxpower_low_alarm = b2[OM_A2_RXPOWER_LOW_ALARM] * 256 + b2[OM_A2_RXPOWER_LOW_ALARM + 1];
		uint16_t rxpower_high_warning = b2[OM_A2_RXPOWER_HIGH_WARNING] * 256 + b2[OM_A2_RXPOWER_HIGH_WARNING + 1];
		uint16_t rxpower_low_warning = b2[OM_A2_RXPOWER_LOW_WARNING] * 256 + b2[OM_A2_RXPOWER_LOW_WARNING + 1];
		uint16_t rxpower = b2[OM_A2_ADDR_RXPOWER] * 256 + b2[OM_A2_ADDR_RXPOWER + 1];
		
		if(rxpower > rxpower_high_alarm){
			b2[OM_A2_DDM_ALARM + 1] &= ~(1 << 6);
			b2[OM_A2_DDM_ALARM + 1] |= (1 << 7);
		}
		else{
			if(rxpower > rxpower_high_warning){
				b2[OM_A2_DDM_WARNING + 1] &= ~(1 << 6);
				b2[OM_A2_DDM_WARNING + 1] |= (1 << 7);
			}
		}
		if(rxpower < rxpower_low_alarm){
			b2[OM_A2_DDM_ALARM + 1] &= ~(1 << 7);
			b2[OM_A2_DDM_ALARM + 1] |= (1 << 6);
		}
		else{
			if(rxpower < rxpower_low_warning){
				b2[OM_A2_DDM_WARNING + 1] &= ~(1 << 7);
				b2[OM_A2_DDM_WARNING + 1] |= (1 << 6);
			}
		}		

	}
	if(~(c2[OM_A2_TX_STATE] & (1 << 6))){
		uint16_t voltage_high_alarm = c2[OM_A2_VOLTAGE_HIGH_ALARM] * 256 + c2[OM_A2_VOLTAGE_HIGH_ALARM + 1];
		uint16_t voltage_low_alarm = c2[OM_A2_VOLTAGE_LOW_ALARM] * 256 + c2[OM_A2_VOLTAGE_LOW_ALARM + 1];
		uint16_t voltage_high_warning = c2[OM_A2_VOLTAGE_HIGH_WARNING] * 256 + c2[OM_A2_VOLTAGE_HIGH_WARNING + 1];
		uint16_t voltage_low_warning = c2[OM_A2_VOLTAGE_LOW_WARNING] * 256 + c2[OM_A2_VOLTAGE_LOW_WARNING + 1];
		uint16_t voltage = c2[OM_A2_ADDR_VOLTAGE] * 256 + c2[OM_A2_ADDR_VOLTAGE + 1];
		
		if(voltage > voltage_high_alarm){
			c2[OM_A2_DDM_ALARM] &= ~(1 << 4);
			c2[OM_A2_DDM_ALARM] |= (1 << 5);
		}
		else{
			if(voltage > voltage_high_warning){
				c2[OM_A2_DDM_WARNING] &= ~(1 << 4);
				c2[OM_A2_DDM_WARNING] |= (1 << 5);
			}
		}
		if(voltage < voltage_low_alarm){
			c2[OM_A2_DDM_ALARM] &= ~(1 << 5);
			c2[OM_A2_DDM_ALARM] |= (1 << 4);
		}
		else{
			if(voltage < voltage_low_warning){
				c2[OM_A2_DDM_WARNING] &= ~(1 << 5);
				c2[OM_A2_DDM_WARNING] |= (1 << 4);
			}
		}

		uint16_t bias_high_alarm = c2[OM_A2_BIAS_HIGH_ALARM] * 256 + c2[OM_A2_BIAS_HIGH_ALARM + 1];
		uint16_t bias_low_alarm = c2[OM_A2_BIAS_LOW_ALARM] * 256 + c2[OM_A2_BIAS_LOW_ALARM + 1];
		uint16_t bias_high_warning = c2[OM_A2_BIAS_HIGH_WARNING] * 256 + c2[OM_A2_BIAS_HIGH_WARNING + 1];
		uint16_t bias_low_warning = c2[OM_A2_BIAS_LOW_WARNING] * 256 + c2[OM_A2_BIAS_LOW_WARNING + 1];
		uint16_t bias = c2[OM_A2_ADDR_BIAS] * 256 + c2[OM_A2_ADDR_BIAS + 1];
		
		if(bias > bias_high_alarm){
			c2[OM_A2_DDM_ALARM] &= ~(1 << 2);
			c2[OM_A2_DDM_ALARM] |= (1 << 3);
		}
		else{
			if(bias > bias_high_warning){
				c2[OM_A2_DDM_WARNING] &= ~(1 << 2);
				c2[OM_A2_DDM_WARNING] |= (1 << 3);
			}
		}
		if(bias < bias_low_alarm){
			c2[OM_A2_DDM_ALARM] &= ~(1 << 3);
			c2[OM_A2_DDM_ALARM] |= (1 << 2);
		}
		else{
			if(bias < bias_low_warning){
				c2[OM_A2_DDM_WARNING] &= ~(1 << 3);
				c2[OM_A2_DDM_WARNING] |= (1 << 2);
			}
		}
		
		uint16_t txpower_high_alarm = c2[OM_A2_TXPOWER_HIGH_ALARM] * 256 + c2[OM_A2_TXPOWER_HIGH_ALARM + 1];
		uint16_t txpower_low_alarm = c2[OM_A2_TXPOWER_LOW_ALARM] * 256 + c2[OM_A2_TXPOWER_LOW_ALARM + 1];
		uint16_t txpower_high_warning = c2[OM_A2_TXPOWER_HIGH_WARNING] * 256 + c2[OM_A2_TXPOWER_HIGH_WARNING + 1];
		uint16_t txpower_low_warning = c2[OM_A2_TXPOWER_LOW_WARNING] * 256 + c2[OM_A2_TXPOWER_LOW_WARNING + 1];
		uint16_t txpower = c2[OM_A2_ADDR_TXPOWER] * 256 + c2[OM_A2_ADDR_TXPOWER + 1];
		
		if(txpower > txpower_high_alarm){
			c2[OM_A2_DDM_ALARM] &= ~(1 << 0);
			c2[OM_A2_DDM_ALARM] |= (1 << 1);
		}
		else{
			if(txpower > txpower_high_warning){
				c2[OM_A2_DDM_WARNING] &= ~(1 << 0);
				c2[OM_A2_DDM_WARNING] |= (1 << 1);
			}
		}
		if(txpower < txpower_low_alarm){
			c2[OM_A2_DDM_ALARM] &= ~(1 << 1);
			c2[OM_A2_DDM_ALARM] |= (1 << 0);
		}
		else{
			if(txpower < txpower_low_warning){
				c2[OM_A2_DDM_WARNING] &= ~(1 << 1);
				c2[OM_A2_DDM_WARNING] |= (1 << 0);
			}
		}
		
		uint16_t rxpower_high_alarm = c2[OM_A2_RXPOWER_HIGH_ALARM] * 256 + c2[OM_A2_RXPOWER_HIGH_ALARM + 1];
		uint16_t rxpower_low_alarm = c2[OM_A2_RXPOWER_LOW_ALARM] * 256 + c2[OM_A2_RXPOWER_LOW_ALARM + 1];
		uint16_t rxpower_high_warning = c2[OM_A2_RXPOWER_HIGH_WARNING] * 256 + c2[OM_A2_RXPOWER_HIGH_WARNING + 1];
		uint16_t rxpower_low_warning = c2[OM_A2_RXPOWER_LOW_WARNING] * 256 + c2[OM_A2_RXPOWER_LOW_WARNING + 1];
		uint16_t rxpower = c2[OM_A2_ADDR_RXPOWER] * 256 + c2[OM_A2_ADDR_RXPOWER + 1];
		
		if(rxpower > rxpower_high_alarm){
			c2[OM_A2_DDM_ALARM + 1] &= ~(1 << 6);
			c2[OM_A2_DDM_ALARM + 1] |= (1 << 7);
		}
		else{
			if(rxpower > rxpower_high_warning){
				c2[OM_A2_DDM_WARNING + 1] &= ~(1 << 6);
				c2[OM_A2_DDM_WARNING + 1] |= (1 << 7);
			}
		}
		if(rxpower < rxpower_low_alarm){
			c2[OM_A2_DDM_ALARM + 1] &= ~(1 << 7);
			c2[OM_A2_DDM_ALARM + 1] |= (1 << 6);
		}
		else{
			if(rxpower < rxpower_low_warning){
				c2[OM_A2_DDM_WARNING + 1] &= ~(1 << 7);
				c2[OM_A2_DDM_WARNING + 1] |= (1 << 6);
			}
		}		

	}	
}





/***********************************************************************
	** 函 数 名： om_default_config_flash_read
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： uint8_t 1 读取成功 0 读取失败
	** 功能描述： 读取光模块控制参数函数
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
uint8_t om_default_config_flash_read()
{
	uint32_t addr = 0;
	uint16_t i = 0;
	uint16_t icount = 0;
	uint8_t VAL = 0;

	addr = CONFIGADDRESS;
	
	for(i=0;i<FLASH_CONFIG_LENGTH;i++) 
	{
		VAL = *(uint8_t*) addr;
		if(VAL == 0xFF)
		{
			icount++;
		}
		addr = addr + sizeof(uint8_t);
	}
	if(icount != FLASH_CONFIG_LENGTH)
	{
		addr = CONFIGADDRESS;
		for(i=0;i<FLASH_CONFIG_LENGTH;i++) 
		{
			VAL = *(uint8_t*) addr;
			default_config_value[i] = VAL;
			addr = addr + sizeof(uint8_t);
		}

		om_default_config_flash_read_50g();
		om_default_config_flash_read_10g();
		om_default_config_flash_read_1g();
		
		return 1;
	}
	else
	{
		return 0;
	}
}

/***********************************************************************
	** 函 数 名： om_default_config_flash_init
	** 输    入： 无
	** 输    出： 无
	** 返 回 值： 无
	** 功能描述： 初始化光模块控制参数函数
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void om_default_config_flash_init()
{
	memset((void*)&default_config_value,0xFF,sizeof(default_config_value));//初始化默认配置参数全0xFF

    
	if(om_default_config_flash_read() == 1)
	{
/* add by fz, 20250115, 原因:50g默认配置 */
		//sgm41282c_set_apd(om_default_config.rx_vapd_0,SFF_50G_TYPE);//apd收端升压值
		ddm_50g_set_rx_vapd(om_default_config.rx_vapd_0);
		
		//sgm41295_set_ld(om_default_config.tx_soa_0);//soa电流
		ddm_50g_set_soa_ild(om_default_config.tx_soa_0);
		
		//sgm41295_set_vea(om_default_config.tx_vea_0);//vea负压
		ddm_50g_set_ea(om_default_config.tx_vea_0);

		
		default_config_apc_auto_enable(SFF_50G_TYPE,om_default_config.tx_apc_en_0);

		
		//gn7161_set_ld_imod(om_default_config.tx_imod_0);//imod调制电压
		ddm_50g_set_ld_imod(om_default_config.tx_imod_0);

		
		//gn7161_set_tx_ld_cpa(om_default_config.tx_cpa_0);//cpa交叉点
		ddm_50g_set_tx_ld_cpa(om_default_config.tx_cpa_0);

		
		//gn7161_set_tx_ld_deemph(om_default_config.tx_deemph_0);//imod_de发端去预加重
		ddm_50g_set_tx_ld_deempth(om_default_config.tx_deemph_0);

		
		//gn7161_set_rx_eq_boost(om_default_config.rx_eq_0);//eq收端EQ值
		ddm_50g_set_rx_eq_boost(om_default_config.rx_eq_0);

		
		//gn7161_set_rx_swing(om_default_config.rx_swing_0);//swing收端摆幅值
		ddm_50g_set_rx_swing(om_default_config.rx_swing_0);

		
		//gn7161_set_rx_drv_deemph(om_default_config.rx_deemph_0);//level_de收端去预加重
		ddm_50g_set_rx_drv_deemph(om_default_config.rx_deemph_0);

		
		//gn7161_set_rx_los_threshold(om_default_config.rx_los_threshold_0);//los_threshold收端信号丢失阈值
		ddm_50g_set_rx_los_threshold(om_default_config.rx_los_threshold_0);

		
		//gn7161_set_rx_los_hyst(om_default_config.rx_los_hyst_0);//los_hyst收端信号丢失迟滞值
		ddm_50g_set_rx_los_hyst(om_default_config.rx_los_hyst_0);
		
		tec_set_ctrl_temperature_obj(om_default_config.tec_target_temp);//tec_target_temp TEC锁定目标温度值


/* add by fz, 20250115, 原因:10g默认配置 */
		//sgm41282c_set_apd(om_default_config.rx_vapd_1,SFF_10G_TYPE);//apd收端升压值
		ddm_10g_set_rx_vapd(om_default_config.rx_vapd_1);
		
		//sgm2508_set_vea(om_default_config.tx_vea_1);//vea负压
		ddm_10g_set_ea(om_default_config.tx_vea_1);
		
		//gn7153_set_ld_ibias(om_default_config.tx_ibias_1);//ld偏置电流
		default_config_apc_auto_enable(SFF_10G_TYPE,om_default_config.tx_apc_en_1);

		
		//gn7153_set_ld_imod(om_default_config.tx_imod_1);//imod调制电压
		ddm_10g_set_ld_imod(om_default_config.tx_imod_1);

		
		//gn7153_set_tx_ld_cpa(om_default_config.tx_cpa_1);//cpa交叉点
		ddm_10g_set_tx_ld_cpa(om_default_config.tx_cpa_1);

		//gn7153_set_tx_ld_preemph(om_default_config.tx_deemph_1);//imod_de发端去预加重
		ddm_10g_set_tx_ld_deempth(om_default_config.tx_deemph_1);

		//gn7153_set_rx_eq_boost(om_default_config.rx_eq_1);//eq收端EQ值
		ddm_10g_set_rx_eq_boost(om_default_config.rx_eq_1);

		//gn7153_set_rx_swing(om_default_config.rx_swing_1);//swing收端摆幅值
		ddm_10g_set_rx_swing(om_default_config.rx_swing_1);

		//gn7153_set_rx_drv_preemph(om_default_config.rx_deemph_1);//level_de收端去预加重
		ddm_10g_set_rx_drv_deemph(om_default_config.rx_deemph_1);
		
		//gn7153_set_rx_los_threshold(om_default_config.rx_los_threshold_1);//los_threshold收端信号丢失阈值
		ddm_10g_set_rx_los_threshold(om_default_config.rx_los_threshold_1);
		
		//gn7153_set_rx_los_hyst(om_default_config.rx_los_hyst_1);//los_hyst收端信号丢失迟滞值
		ddm_10g_set_rx_los_hyst(om_default_config.rx_los_hyst_1);


/* add by fz, 20250115, 原因:1g默认配置 */
		//sgm41282c_set_apd(om_default_config.rx_vapd_2,SFF_1G_TYPE);//apd收端升压值
		ddm_1g_set_rx_vapd(om_default_config.rx_vapd_2);


		//ux3326_set_ld_ibias(om_default_config.tx_ibias_2);//ld偏置电流
		default_config_apc_auto_enable(SFF_1G_TYPE,om_default_config.tx_apc_en_2);

		//ux3326_set_ld_imod(om_default_config.tx_imod_2);//imod调制电压
		ddm_1g_set_ld_imod(om_default_config.tx_imod_2);
		
		//ux3326_set_tx_ld_cpa(om_default_config.tx_cpa_2);//cpa交叉点
		ddm_1g_set_tx_ld_cpa(om_default_config.tx_cpa_2);
		
		//ux3326_set_rx_swing(om_default_config.rx_swing_2);//swing收端摆幅值
		ddm_1g_set_rx_swing(om_default_config.rx_swing_2);
		
		//ux3326_set_rx_los_threshold(om_default_config.rx_los_threshold_2);//los_threshold收端信号丢失阈值
		ddm_1g_set_rx_los_threshold(om_default_config.rx_los_threshold_2);
				
		//ux3326_set_rx_los_hyst(om_default_config.rx_los_hyst_2);//los_hyst收端信号丢失迟滞值
		ddm_1g_set_rx_los_hyst(om_default_config.rx_los_hyst_2);

	}

   
}




/***********************************************************************
	** 函 数 名： om_crc32_reset
	** 输    入： 无
	
	** 输    出： 无
	
	** 返 回 值： 无
	** 功能描述： crc reset
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
void om_crc32_reset()
{
	crc_deinit();	

	/* configure the size of polynomial */
	crc_polynomial_size_set(CRC_CTL_PS_32);

	crc_reverse_output_data_enable();
	
	/* configure the CRC input data reverse function */
	crc_input_data_reverse_config(CRC_INPUT_DATA_WORD);
}



/***********************************************************************
	** 函 数 名： om_flash_block_data_calculate_crc32
	** 输    入： 
	crc_start_address：crc校验起始地址
	uint32_t size：校验数据长度
	** 输    出： 
	CRC_DATA：crc校验结果
	** 返 回 值： 无
	** 功能描述： 32位crc校验
	** 作    者： gqhuan
	** 日    期： 
************************************************************************/
uint32_t om_flash_block_data_calculate_crc32(uint32_t crc_start_address, uint32_t size)
{
	uint32_t data32;
	uint32_t index;
	uint32_t crc_next_address;
	uint32_t size_batch = 0;
	uint32_t page_couter = size / FLASH_PAGE_SIZE;
	uint32_t div_page_mod = size % FLASH_PAGE_SIZE;	
	uint32_t i = 0;

	for(i = 0; i < page_couter;i++)
	{
		size_batch = FLASH_PAGE_SIZE / 4;
		for(index = 0U; index < size_batch; index++)
		{
			crc_next_address = (crc_start_address + i * FLASH_PAGE_SIZE) + index*4U;
			memcpy(&data32,(uint32_t*)crc_next_address,4);
			REG32(CRC) = data32;
		}		
	}

	size_batch = div_page_mod / 4;
	for(index = 0U; index < size_batch; index++)
	{
		crc_next_address = (crc_start_address + page_couter * FLASH_PAGE_SIZE) + index*4U;
		memcpy(&data32,(uint32_t*)crc_next_address,4);
		REG32(CRC) = data32;
	}

	return (CRC_DATA);
   
}



/*****************************************************************************
 * 函 数 名  : ddm_process
 * 负 责 人  : gqhuan
 * 创建日期  : 2023年10月11日
 * 函数功能  : 定时刷新DDM五个参量值
 * 输入参数  : 无
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 
*****************************************************************************/
void ddm_process()
{

	//if((SET == g_50g_ddm_sw_auto_process_flag) | (SET == g_10g_ddm_sw_auto_process_flag) | (SET == g_1g_ddm_sw_auto_process_flag))
	if((SET == g_mcu_vars_param.g_50g_ddm_sw_auto_process_flag)
		|| (SET == g_mcu_vars_param.g_10g_ddm_sw_auto_process_flag)
		|| (SET == g_mcu_vars_param.g_1g_ddm_sw_auto_process_flag))
	{
		if(DDM_PROCESS_MS_TASK > 1000)
		{
			DDM_PROCESS_MS_TASK = 0;
			/*DDM变量更新*/
			update_om_diagnose();
			
			/*告警更新*/
			update_om_warning();
		
		}	
	}
		
}

//extern uint32_t SRE_DspSetUp(uint8_t workMode, uint32_t fwAddr);



/*****************************************************************************
 * 函 数 名  : flash_config_init
 * 负 责 人  : fz
 * 创建日期  : 2023年12月5日
 * 函数功能  : 
 * 输入参数  : 无
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 

*****************************************************************************/
void flash_config_init()
{
	#if 0
		fmc_erase_single_page(A0_REG_ADDRESS);
		fmc_erase_single_page(A2_REG_ADDRESS);
		fmc_erase_single_page(B0_REG_ADDRESS);
		fmc_erase_single_page(B2_REG_ADDRESS);
		fmc_erase_single_page(C0_REG_ADDRESS);
		fmc_erase_single_page(C2_REG_ADDRESS);
		flash_write((uint8_t*)a0,A0_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
		flash_write((uint8_t*)a2,A2_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
		flash_write((uint8_t*)b0,B0_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
		flash_write((uint8_t*)b2,B2_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
		flash_write((uint8_t*)c0,C0_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
		flash_write((uint8_t*)c2,C2_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	#endif
   
	memset((void*)&ddm_adc_out_val,0,sizeof(ddm_adc_out_val));
	memset((void*)&om_default_config,0,sizeof(om_default_config));

	om_default_config.tx_i_slope_0 = 0.2129;
	om_default_config.tx_i_offset_0 = 0.382;
	om_default_config.tx_pwr_slope_0 = 53.52;
	om_default_config.tx_pwr_offset_0 = -1.547;
	om_default_config.rx_pwr_a_0 = 2E-07; //接收光功率暂时未使用二次函数拟合方法校准
	om_default_config.rx_pwr_b_0 = -1E-04;
	om_default_config.rx_pwr_c_0 = 0.0136;

	om_default_config.tx_i_slope_1 = 0.1639;
	om_default_config.tx_i_offset_1 = 0.465;
	om_default_config.tx_pwr_slope_1 = 59.488;
	om_default_config.tx_pwr_offset_1 = -2.4246;
	om_default_config.rx_pwr_a_1 = 0;//待定
	om_default_config.rx_pwr_b_1 = 0;//待定
	om_default_config.rx_pwr_c_1 = 0;//待定

	om_default_config.tx_i_slope_2 = 0.8646;
	om_default_config.tx_i_offset_2 = 0.0;
	om_default_config.tx_pwr_slope_2 = 0.0016;
	om_default_config.tx_pwr_offset_2 = -0.0641;
	om_default_config.rx_pwr_a_2 = 0;//待定
	om_default_config.rx_pwr_b_2 = 0;//待定
	om_default_config.rx_pwr_c_2 = 0;//待定
	
	uint32_t addr = 0;
	uint16_t i = 0;
	uint16_t icount = 0;
	uint8_t VAL = 0;

	addr = A0_REG_ADDRESS;
	
	for(i=0;i<OM_TABLE_SFF_8472_DATA_LEN;i++) 
	{
		VAL = *(uint8_t*) addr;
		addr = addr + sizeof(uint8_t);
		if(VAL == 0xFF || VAL == 0x00)
		{
			icount++;
		}
	}
	if(icount == OM_TABLE_SFF_8472_DATA_LEN)
	{
		fmc_erase_single_page(A0_REG_ADDRESS);
		flash_write((uint8_t*)a0,A0_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	}
	
	addr = A2_REG_ADDRESS;
	icount = 0;
	VAL = 0;
	
	for(i=0;i<OM_TABLE_SFF_8472_DATA_LEN;i++) 
	{
		VAL = *(uint8_t*) addr;
		addr = addr + sizeof(uint8_t);
		if(VAL == 0xFF || VAL == 0x00)
		{
			icount++;
		}
	}
	if(icount == OM_TABLE_SFF_8472_DATA_LEN)
	{
		fmc_erase_single_page(A2_REG_ADDRESS);
		flash_write((uint8_t*)a2,A2_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	}

	addr = B0_REG_ADDRESS;
	icount = 0;
	VAL = 0;
	
	for(i=0;i<OM_TABLE_SFF_8472_DATA_LEN;i++) 
	{
		VAL = *(uint8_t*) addr;
		addr = addr + sizeof(uint8_t);
		if(VAL == 0xFF || VAL == 0x00)
		{
			icount++;
		}
	}
	if(icount == OM_TABLE_SFF_8472_DATA_LEN)
	{
		fmc_erase_single_page(B0_REG_ADDRESS);
		flash_write((uint8_t*)b0,B0_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	}

	addr = B2_REG_ADDRESS;
	icount = 0;
	VAL = 0;
	
	for(i=0;i<OM_TABLE_SFF_8472_DATA_LEN;i++) 
	{
		VAL = *(uint8_t*) addr;
		addr = addr + sizeof(uint8_t);
		if(VAL == 0xFF || VAL == 0x00)
		{
			icount++;
		}
	}
	if(icount == OM_TABLE_SFF_8472_DATA_LEN)
	{
		fmc_erase_single_page(B2_REG_ADDRESS);
		flash_write((uint8_t*)b2,B2_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	}

	addr = C0_REG_ADDRESS;
	icount = 0;
	VAL = 0;
	
	for(i=0;i<OM_TABLE_SFF_8472_DATA_LEN;i++) 
	{
		VAL = *(uint8_t*) addr;
		addr = addr + sizeof(uint8_t);
		if(VAL == 0xFF || VAL == 0x00)
		{
			icount++;
		}
	}
	if(icount == OM_TABLE_SFF_8472_DATA_LEN)
	{
		fmc_erase_single_page(C0_REG_ADDRESS);
		flash_write((uint8_t*)c0,C0_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	}

	addr = C2_REG_ADDRESS;
	icount = 0;
	VAL = 0;
	
	for(i=0;i<OM_TABLE_SFF_8472_DATA_LEN;i++) 
	{
		VAL = *(uint8_t*) addr;
		addr = addr + sizeof(uint8_t);
		if(VAL == 0xFF || VAL == 0x00)
		{
			icount++;
		}
	}
	if(icount == OM_TABLE_SFF_8472_DATA_LEN)
	{
		fmc_erase_single_page(C2_REG_ADDRESS);
		flash_write((uint8_t*)c2,C2_REG_ADDRESS,OM_TABLE_SFF_8472_DATA_LEN);
	}
}



/*****************************************************************************
 * 函 数 名  : default_config_apc_auto_enable
 * 负 责 人  : fz
 * 创建日期  : 2024年9月14日
 * 函数功能  : 使用默认值，启用apc自动使能
 * 输入参数  :SFF_MODULE_TYPE module_type, 光模块类型
 				uint8_t ctrl_enable  1-使能；0-去使能
 * 输出参数  : 无
 * 返 回 值  : 无
 * 调用关系  : 外部调用
 * 其    它  : 无

*****************************************************************************/
void default_config_apc_auto_enable(SFF_MODULE_TYPE module_type,uint8_t ctrl_enable)
{
	if(1 == ctrl_enable)
	{
		if(SFF_50G_TYPE == module_type)
		{
			float apc_target_value_50g = om_default_config.tx_apc_target_0;
			ddm_50g_apc_target_voltage(apc_target_value_50g);
			ddm_50g_apc_auto_enable(ctrl_enable);
			
		}
		else if(SFF_10G_TYPE == module_type)
		{
			float apc_target_value_10g = om_default_config.tx_apc_target_1;		
			ddm_10g_apc_target_voltage(apc_target_value_10g);
			ddm_10g_apc_auto_enable(ctrl_enable);
		}
		else
		{
			uint16_t apc_target_value_1g = om_default_config.tx_apc_target_2;		
			ddm_1g_apc_target_voltage(apc_target_value_1g);
			ddm_1g_apc_auto_enable(ctrl_enable);
		}
	}
	else
	{
		if(SFF_50G_TYPE == module_type)
		{			
			ddm_50g_apc_auto_enable(0);
			//gn7161_set_ld_ibias(om_default_config.tx_ibias_0);
			ddm_50g_set_ld_ibias(om_default_config.tx_ibias_0);
		}
		else if(SFF_10G_TYPE == module_type)
		{			
			ddm_10g_apc_auto_enable(0);
			//gn7153_set_ld_ibias(om_default_config.tx_ibias_1);
			ddm_10g_set_ld_ibias(om_default_config.tx_ibias_1);
		}
		else
		{			
			ddm_1g_apc_auto_enable(0);
			//ux3326_set_ld_ibias(om_default_config.tx_ibias_2);
			ddm_1g_set_ld_ibias(om_default_config.tx_ibias_2);
			
		}
	}
	
	return;
	
}

/*****************************************************************************
 * 函 数 名  : calibration_tx_i_50g_reg_write
 * 负 责 人  : gqhuan
 * 创建日期  : 2024年10月16日
 * 函数功能  : 校准50G发端LD电流的斜率slope和截距offset
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_tx_i_50g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 6)
	{
		return;
	}

	if(CALIBRATION_TX_I_50G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
	
	
    default_config_value[TX_I_SLOPE_HIGH_50G] = pbuff[2];
	default_config_value[TX_I_SLOPE_LOW_50G] = pbuff[3];
	default_config_value[TX_I_OFFSET_HIGH_50G] = pbuff[4];
	default_config_value[TX_I_OFFSET_LOW_50G] = pbuff[5];

	uint16_t cal_tx_i_k = 0;
	uint16_t cal_tx_i_b = 0;
	float k;
	float b;
		
	if(default_config_value[TX_I_SLOPE_HIGH_50G]&0x80){//如果数据为负数，对补码进行解码
		cal_tx_i_k = ~((default_config_value[TX_I_SLOPE_HIGH_50G]<<8) + default_config_value[TX_I_SLOPE_LOW_50G] - 1);
		k = -cal_tx_i_k*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	else{
		cal_tx_i_k = (default_config_value[TX_I_SLOPE_HIGH_50G]<<8) + default_config_value[TX_I_SLOPE_LOW_50G];
		k = cal_tx_i_k*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	if(default_config_value[TX_I_OFFSET_HIGH_50G]&0x80){
		cal_tx_i_b = ~((default_config_value[TX_I_OFFSET_HIGH_50G]<<8) + default_config_value[TX_I_OFFSET_LOW_50G] - 1);
		b =  -cal_tx_i_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	else{
		cal_tx_i_b = (default_config_value[TX_I_OFFSET_HIGH_50G]<<8) + default_config_value[TX_I_OFFSET_LOW_50G];
		b =  cal_tx_i_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	om_default_config.tx_i_slope_0 = k;
	om_default_config.tx_i_offset_0 = b;

	return;
}

/*****************************************************************************
 * 函 数 名  : calibration_tx_i_10g_reg_write
 * 负 责 人  : sjtu
 * 创建日期  : 2024年11月12日
 * 函数功能  : 校准10G发端LD电流的斜率slope和截距offset
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_tx_i_10g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 6)
	{
		return;
	}

	if(CALIBRATION_TX_I_10G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
	
	
    default_config_value[TX_I_SLOPE_HIGH_10G] = pbuff[2];
	default_config_value[TX_I_SLOPE_LOW_10G] = pbuff[3];
	default_config_value[TX_I_OFFSET_HIGH_10G] = pbuff[4];
	default_config_value[TX_I_OFFSET_LOW_10G] = pbuff[5];

	uint16_t cal_tx_i_k = 0;
	uint16_t cal_tx_i_b = 0;
	float k;
	float b;
		
	if(default_config_value[TX_I_SLOPE_HIGH_10G]&0x80){
		cal_tx_i_k = ~((default_config_value[TX_I_SLOPE_HIGH_10G]<<8) + default_config_value[TX_I_SLOPE_LOW_10G] - 1);
		k = -cal_tx_i_k*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	else{
		cal_tx_i_k = (default_config_value[TX_I_SLOPE_HIGH_10G]<<8) + default_config_value[TX_I_SLOPE_LOW_10G];
		k = cal_tx_i_k*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	if(default_config_value[TX_I_OFFSET_HIGH_10G]&0x80){
		cal_tx_i_b = ~((default_config_value[TX_I_OFFSET_HIGH_10G]<<8) + default_config_value[TX_I_OFFSET_LOW_10G] - 1);
		b =  -cal_tx_i_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	else{
		cal_tx_i_b = (default_config_value[TX_I_OFFSET_HIGH_10G]<<8) + default_config_value[TX_I_OFFSET_LOW_10G];
		b =  cal_tx_i_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	om_default_config.tx_i_slope_1 = k;
	om_default_config.tx_i_offset_1 = b;

	return;
}

/*****************************************************************************
 * 函 数 名  : calibration_tx_i_1g_reg_write
 * 负 责 人  : sjtu
 * 创建日期  : 2024年11月12日
 * 函数功能  : 校准1G发端LD电流的斜率slope和截距offset
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 

*****************************************************************************/
void calibration_tx_i_1g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 6)
	{
		return;
	}

	if(CALIBRATION_TX_I_1G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
	
	
    default_config_value[TX_I_SLOPE_HIGH_1G] = pbuff[2];
	default_config_value[TX_I_SLOPE_LOW_1G] = pbuff[3];
	default_config_value[TX_I_OFFSET_HIGH_1G] = pbuff[4];
	default_config_value[TX_I_OFFSET_LOW_1G] = pbuff[5];

	uint16_t cal_tx_i_k = 0;
	uint16_t cal_tx_i_b = 0;
	float k;
	float b;
		
	if(default_config_value[TX_I_SLOPE_HIGH_1G]&0x80){
		cal_tx_i_k = ~((default_config_value[TX_I_SLOPE_HIGH_1G]<<8) + default_config_value[TX_I_SLOPE_LOW_1G] - 1);
		k = -cal_tx_i_k*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	else{
		cal_tx_i_k = (default_config_value[TX_I_SLOPE_HIGH_1G]<<8) + default_config_value[TX_I_SLOPE_LOW_1G];
		k = cal_tx_i_k*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	if(default_config_value[TX_I_OFFSET_HIGH_1G]&0x80){
		cal_tx_i_b = ~((default_config_value[TX_I_OFFSET_HIGH_1G]<<8) + default_config_value[TX_I_OFFSET_LOW_1G] - 1);
		b =  -cal_tx_i_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	else{
		cal_tx_i_b = (default_config_value[TX_I_OFFSET_HIGH_1G]<<8) + default_config_value[TX_I_OFFSET_LOW_1G];
		b =  cal_tx_i_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	om_default_config.tx_i_slope_2 = k;
	om_default_config.tx_i_offset_2 = b;

	return;
}

/*****************************************************************************
 * 函 数 名  : calibration_tx_pwr_50g_reg_write
 * 负 责 人  : gqhuan
 * 创建日期  : 2024年10月16日
 * 函数功能  : 校准50G发送光功率的斜率slope和截距offset
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_tx_pwr_50g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 6)
	{
		return;
	}

	if(CALIBRATION_TX_PWR_50G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
	
	
	default_config_value[TX_PWR_SLOPE_HIGH_50G] = pbuff[2];
	default_config_value[TX_PWR_SLOPE_LOW_50G] = pbuff[3];
	default_config_value[TX_PWR_OFFSET_HIGH_50G] = pbuff[4];
	default_config_value[TX_PWR_OFFSET_LOW_50G] = pbuff[5];

	uint16_t cal_tx_pwr_k = 0;
	uint16_t cal_tx_pwr_b = 0;
	float k;
	float b;
		
	if(default_config_value[TX_PWR_SLOPE_HIGH_50G]&0x80){
		cal_tx_pwr_k = ~((default_config_value[TX_PWR_SLOPE_HIGH_50G]<<8) + default_config_value[TX_PWR_SLOPE_LOW_50G] - 1);
		k = -cal_tx_pwr_k*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	else{
		cal_tx_pwr_k = (default_config_value[TX_PWR_SLOPE_HIGH_50G]<<8) + default_config_value[TX_PWR_SLOPE_LOW_50G];
		k = cal_tx_pwr_k*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}

	if(default_config_value[TX_PWR_OFFSET_HIGH_50G]&0x80){
		cal_tx_pwr_b = ~((default_config_value[TX_PWR_OFFSET_HIGH_50G]<<8) + default_config_value[TX_PWR_OFFSET_LOW_50G] - 1);
		b = -cal_tx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	else{
		cal_tx_pwr_b = (default_config_value[TX_PWR_OFFSET_HIGH_50G]<<8) + default_config_value[TX_PWR_OFFSET_LOW_50G];
		b = cal_tx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	om_default_config.tx_pwr_slope_0 = k;
	om_default_config.tx_pwr_offset_0= b;

	return;
}


/*****************************************************************************
 * 函 数 名  : calibration_tx_pwr_10g_reg_write
 * 负 责 人  : sjtu
 * 创建日期  : 2024年11月12日
 * 函数功能  : 校准10G发送光功率的斜率slope和截距offset
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_tx_pwr_10g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 6)
	{
		return;
	}

	if(CALIBRATION_TX_PWR_10G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
	
	
	default_config_value[TX_PWR_SLOPE_HIGH_10G] = pbuff[2];
	default_config_value[TX_PWR_SLOPE_LOW_10G] = pbuff[3];
	default_config_value[TX_PWR_OFFSET_HIGH_10G] = pbuff[4];
	default_config_value[TX_PWR_OFFSET_LOW_10G] = pbuff[5];

	uint16_t cal_tx_pwr_k = 0;
	uint16_t cal_tx_pwr_b = 0;
	float k;
	float b;
		
	if(default_config_value[TX_PWR_SLOPE_HIGH_10G]&0x80){
		cal_tx_pwr_k = ~((default_config_value[TX_PWR_SLOPE_HIGH_10G]<<8) + default_config_value[TX_PWR_SLOPE_LOW_10G] - 1);
		k = -cal_tx_pwr_k*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	else{
		cal_tx_pwr_k = (default_config_value[TX_PWR_SLOPE_HIGH_10G]<<8) + default_config_value[TX_PWR_SLOPE_LOW_10G];
		k = cal_tx_pwr_k*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}

	if(default_config_value[TX_PWR_OFFSET_HIGH_10G]&0x80){
		cal_tx_pwr_b = ~((default_config_value[TX_PWR_OFFSET_HIGH_10G]<<8) + default_config_value[TX_PWR_OFFSET_LOW_10G] - 1);
		b = -cal_tx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	else{
		cal_tx_pwr_b = (default_config_value[TX_PWR_OFFSET_HIGH_10G]<<8) + default_config_value[TX_PWR_OFFSET_LOW_10G];
		b = cal_tx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	om_default_config.tx_pwr_slope_1 = k;
	om_default_config.tx_pwr_offset_1= b;

	return;
}


/*****************************************************************************
 * 函 数 名  : calibration_tx_pwr_1g_reg_write
 * 负 责 人  : sjtu
 * 创建日期  : 2024年11月12日
 * 函数功能  : 校准1G发送光功率的斜率slope和截距offset
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_tx_pwr_1g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 6)
	{
		return;
	}

	if(CALIBRATION_TX_PWR_1G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
	
	
	default_config_value[TX_PWR_SLOPE_HIGH_1G] = pbuff[2];
	default_config_value[TX_PWR_SLOPE_LOW_1G] = pbuff[3];
	default_config_value[TX_PWR_OFFSET_HIGH_1G] = pbuff[4];
	default_config_value[TX_PWR_OFFSET_LOW_1G] = pbuff[5];

	uint16_t cal_tx_pwr_k = 0;
	uint16_t cal_tx_pwr_b = 0;
	float k;
	float b;
		
	if(default_config_value[TX_PWR_SLOPE_HIGH_1G]&0x80){
		cal_tx_pwr_k = ~((default_config_value[TX_PWR_SLOPE_HIGH_1G]<<8) + default_config_value[TX_PWR_SLOPE_LOW_1G] - 1);
		k = -cal_tx_pwr_k*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	else{
		cal_tx_pwr_k = (default_config_value[TX_PWR_SLOPE_HIGH_1G]<<8) + default_config_value[TX_PWR_SLOPE_LOW_1G];
		k = cal_tx_pwr_k*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}

	if(default_config_value[TX_PWR_OFFSET_HIGH_1G]&0x80){
		cal_tx_pwr_b = ~((default_config_value[TX_PWR_OFFSET_HIGH_1G]<<8) + default_config_value[TX_PWR_OFFSET_LOW_1G] - 1);
		b = -cal_tx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	else{
		cal_tx_pwr_b = (default_config_value[TX_PWR_OFFSET_HIGH_1G]<<8) + default_config_value[TX_PWR_OFFSET_LOW_1G];
		b = cal_tx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_100;
	}
	om_default_config.tx_pwr_slope_2 = k;
	om_default_config.tx_pwr_offset_2= b;

	return;
}

/*****************************************************************************
 * 函 数 名  : calibration_rx_pwr_50g_reg_write
 * 作    者  : sjtu
 * 创建日期  : 2024年10月29日
 * 修改日期  : 2025年03月13日
 * 函数功能  : 校准50G接收光功率的指数拟合系数，上位机两个字节下发，数据范围-32.768 ~ 32.768
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_rx_pwr_50g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 8)
	{
		return;
	}

	if(CALIBRATION_RX_PWR_50G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
		
		default_config_value[RX_PWR_A_HIGH_50G] = pbuff[2];
		default_config_value[RX_PWR_A_LOW_50G] = pbuff[3];
		default_config_value[RX_PWR_B_HIGH_50G] = pbuff[4];
		default_config_value[RX_PWR_B_LOW_50G] = pbuff[5];
		default_config_value[RX_PWR_C_HIGH_50G] = pbuff[6];
		default_config_value[RX_PWR_C_LOW_50G] = pbuff[7];

		uint16_t cal_rx_pwr_a = 0;
		uint16_t cal_rx_pwr_b = 0;
		uint16_t cal_rx_pwr_c = 0;
		float a;
		float b;
		float c;

		if(default_config_value[RX_PWR_A_HIGH_50G]&0x80){
			cal_rx_pwr_a = ~((default_config_value[RX_PWR_A_HIGH_50G]<<8) + default_config_value[RX_PWR_A_LOW_50G] - 1);
			a = -cal_rx_pwr_a*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_a= (default_config_value[RX_PWR_A_HIGH_50G]<<8) + default_config_value[RX_PWR_A_LOW_50G];
			a = cal_rx_pwr_a*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		
		if(default_config_value[RX_PWR_B_HIGH_50G]&0x80){
			cal_rx_pwr_b= ~((default_config_value[RX_PWR_B_HIGH_50G]<<8) + default_config_value[RX_PWR_B_LOW_50G] - 1);
			b = -cal_rx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_b= (default_config_value[RX_PWR_B_HIGH_50G]<<8) + default_config_value[RX_PWR_B_LOW_50G];
			b= cal_rx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		
		if(default_config_value[RX_PWR_C_HIGH_50G]&0x80){
			cal_rx_pwr_c= ~((default_config_value[RX_PWR_C_HIGH_50G]<<8) + default_config_value[RX_PWR_C_LOW_50G] - 1);
			c = -cal_rx_pwr_c*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_c= (default_config_value[RX_PWR_C_HIGH_50G]<<8) + default_config_value[RX_PWR_C_LOW_50G];
			c = cal_rx_pwr_c*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		om_default_config.rx_pwr_a_0 = a;            
		om_default_config.rx_pwr_b_0 = b;
		om_default_config.rx_pwr_c_0 = c;

	return;
}


/*****************************************************************************
 * 函 数 名  : calibration_rx_pwr_10g_reg_write
 * 作    者  : sjtu
 * 创建日期  : 2024年11月12日
 * 修改日期  : 2025年03日13日
 * 函数功能  : 校准10G接收光功率的二次函数系数x2、x1、x0，上位机两个字节下发，数据范围-32.768 ~ 32.768
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 如果下发数据为负数，上位机会将其处理为补码，在MCU中需要做解码处理

*****************************************************************************/
void calibration_rx_pwr_10g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 8)
	{
		return;
	}

	if(CALIBRATION_RX_PWR_10G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
		
		default_config_value[RX_PWR_A_HIGH_10G] = pbuff[2];
		default_config_value[RX_PWR_A_LOW_10G] = pbuff[3];
		default_config_value[RX_PWR_B_HIGH_10G] = pbuff[4];
		default_config_value[RX_PWR_B_LOW_10G] = pbuff[5];
		default_config_value[RX_PWR_C_HIGH_10G] = pbuff[6];
		default_config_value[RX_PWR_C_LOW_10G] = pbuff[7];

		uint16_t cal_rx_pwr_a = 0;
		uint16_t cal_rx_pwr_b = 0;
		uint16_t cal_rx_pwr_c = 0;
		float a;
		float b;
		float c;

		if(default_config_value[RX_PWR_A_HIGH_10G]&0x80){
			cal_rx_pwr_a = ~((default_config_value[RX_PWR_A_HIGH_10G]<<8) + default_config_value[RX_PWR_A_LOW_10G] - 1);
			a = -cal_rx_pwr_a*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_a= (default_config_value[RX_PWR_A_HIGH_10G]<<8) + default_config_value[RX_PWR_A_LOW_10G];
			a = cal_rx_pwr_a*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		
		if(default_config_value[RX_PWR_B_HIGH_10G]&0x80){
			cal_rx_pwr_b= ~((default_config_value[RX_PWR_B_HIGH_10G]<<8) + default_config_value[RX_PWR_B_LOW_10G] - 1);
			b = -cal_rx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_b= (default_config_value[RX_PWR_B_HIGH_10G]<<8) + default_config_value[RX_PWR_B_LOW_10G];
			b= cal_rx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		
		if(default_config_value[RX_PWR_C_HIGH_10G]&0x80){
			cal_rx_pwr_c= ~((default_config_value[RX_PWR_C_HIGH_10G]<<8) + default_config_value[RX_PWR_C_LOW_10G] - 1);
			c = -cal_rx_pwr_c*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_c= (default_config_value[RX_PWR_C_HIGH_10G]<<8) + default_config_value[RX_PWR_C_LOW_10G];
			c = cal_rx_pwr_c*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		om_default_config.rx_pwr_a_1 = a;
		om_default_config.rx_pwr_b_1 = b;
		om_default_config.rx_pwr_c_1 = c;

	return;
}


/*****************************************************************************
 * 函 数 名  : calibration_rx_pwr_1g_reg_write
 * 作    者  : sjtu
 * 创建日期  : 2024年11月12日
 * 修改日期  : 2025年03日13日
 * 函数功能  : 校准1G接收光功率的二次函数系数x2、x1、x0，上位机两个字节下发，数据范围-32.768 ~ 32.768
 * 输入参数  : uint8_t *pbuff,
 				uint32_t bufflen
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 

*****************************************************************************/
void calibration_rx_pwr_1g_reg_write(uint8_t *pbuff,uint32_t bufflen)
{	
	if(NULL == pbuff || bufflen < 8)
	{
		return;
	}

	if(CALIBRATION_RX_PWR_1G_CONFIG != pbuff[1] || CMD_COMMAND_MAP_REG != pbuff[0])		
	{
		return;
	}	
		
		default_config_value[RX_PWR_A_HIGH_1G] = pbuff[2];
		default_config_value[RX_PWR_A_LOW_1G] = pbuff[3];
		default_config_value[RX_PWR_B_HIGH_1G] = pbuff[4];
		default_config_value[RX_PWR_B_LOW_1G] = pbuff[5];
		default_config_value[RX_PWR_C_HIGH_1G] = pbuff[6];
		default_config_value[RX_PWR_C_LOW_1G] = pbuff[7];

		uint16_t cal_rx_pwr_a = 0;
		uint16_t cal_rx_pwr_b = 0;
		uint16_t cal_rx_pwr_c = 0;
		float a;
		float b;
		float c;

		if(default_config_value[RX_PWR_A_HIGH_1G]&0x80){
			cal_rx_pwr_a = ~((default_config_value[RX_PWR_A_HIGH_1G]<<8) + default_config_value[RX_PWR_A_LOW_1G] - 1);
			a = -cal_rx_pwr_a*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_a= (default_config_value[RX_PWR_A_HIGH_1G]<<8) + default_config_value[RX_PWR_A_LOW_1G];
			a = cal_rx_pwr_a*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		
		if(default_config_value[RX_PWR_B_HIGH_1G]&0x80){
			cal_rx_pwr_b= ~((default_config_value[RX_PWR_B_HIGH_1G]<<8) + default_config_value[RX_PWR_B_LOW_1G] - 1);
			b = -cal_rx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_b= (default_config_value[RX_PWR_B_HIGH_1G]<<8) + default_config_value[RX_PWR_B_LOW_1G];
			b= cal_rx_pwr_b*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		
		if(default_config_value[RX_PWR_C_HIGH_1G]&0x80){
			cal_rx_pwr_c= ~((default_config_value[RX_PWR_C_HIGH_1G]<<8) + default_config_value[RX_PWR_C_LOW_1G] - 1);
			c = -cal_rx_pwr_c*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		else{
			cal_rx_pwr_c= (default_config_value[RX_PWR_C_HIGH_1G]<<8) + default_config_value[RX_PWR_C_LOW_1G];
			c = cal_rx_pwr_c*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
		}
		om_default_config.rx_pwr_a_2 = a;
		om_default_config.rx_pwr_b_2 = b;
		om_default_config.rx_pwr_c_2 = c;

	return;
}


/*****************************************************************************
 * 函 数 名  : om_default_config_flash_read_50g
 * 作    者  : sjtu
 * 创建日期  : 2025年02月24日
 * 函数功能  : 读取50G模块的配置参数及校准参数
 * 输入参数  : 
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 
*****************************************************************************/
void om_default_config_flash_read_50g()
{
	if(default_config_value[APC_ENABLE_50G_CFG] == 1) // 只有上位机使能的时候，才给tx_apc_en_0赋值为1
	{
		om_default_config.tx_apc_en_0 = default_config_value[APC_ENABLE_50G_CFG];
	}
	else
	{
		om_default_config.tx_apc_en_0 = 0;
	}

	uint16_t apc_target_value_0 = (default_config_value[APC_TARGET_VALUE_50G_CFG_HIGH] << 8) + default_config_value[APC_TARGET_VALUE_50G_CFG_LOW];
	if(apc_target_value_0 <= 1000*10)//*10: 参数范围*10，上位机下发数据时将数据×10便于数据存储
	{
		om_default_config.tx_apc_target_0 = apc_target_value_0 * 0.1;
	}
	else
	{
		om_default_config.tx_apc_target_0 = 0;
	}

	//此处的判断条件应该是:当值在最大值范围内时，将其存储到默认参数中，否则将其设置为0
	uint16_t ibias_value_0 = (default_config_value[TX_IBIAS_VALUE_0_HIGH]<<8) + default_config_value[TX_IBIAS_VALUE_0_LOW];
	if(ibias_value_0 <= 120*10)
	{
		om_default_config.tx_ibias_0 = ibias_value_0 * 0.1 / 0.188;
		printf("om_default_config.tx_ibias_0 = %d\n",om_default_config.tx_ibias_0);
	}
	else
	{
		om_default_config.tx_ibias_0 = 0;
	}

	uint16_t ild_value_0 = (default_config_value[TX_SOA_VALUE_0_HIGH]<<8) + default_config_value[TX_SOA_VALUE_0_LOW];
	if(ild_value_0 <= 100*10)
	{
		om_default_config.tx_soa_0 = ild_value_0 * 0.1;
		printf("om_default_config.tx_soa_0 = %f\n",om_default_config.tx_soa_0);
	}
	else
	{
		om_default_config.tx_soa_0 = 0;
	}

	uint16_t vea_value_0 = (default_config_value[TX_VEA_VALUE_0_HIGH]<<8) + default_config_value[TX_VEA_VALUE_0_LOW];
	if(vea_value_0 <= 2*100)
	{
		om_default_config.tx_vea_0 = vea_value_0 * 0.01;
		printf("om_default_config.tx_vea_0 = %f\n",om_default_config.tx_vea_0);
	}
	else
	{
		om_default_config.tx_vea_0 = 0;
	}

	uint16_t imod_value_0 = (default_config_value[TX_IMOD_VALUE_0_HIGH]<<8) + default_config_value[TX_IMOD_VALUE_0_LOW];
	if(imod_value_0 <= 700*10)
	{
		om_default_config.tx_imod_0 = imod_value_0 * 0.1;
		printf("om_default_config.tx_imod_0 = %d\n",om_default_config.tx_imod_0);
	}
	else
	{
		om_default_config.tx_imod_0 = 580;
	}

	uint16_t cpa_value_0 = (default_config_value[TX_CPA_VALUE_0_HIGH]<<8) + default_config_value[TX_CPA_VALUE_0_LOW];
	if(cpa_value_0 <= 31*10)
	{
		om_default_config.tx_cpa_0 = cpa_value_0 * 0.1;
		printf("om_default_config.tx_cpa_0 = %d\n",om_default_config.tx_cpa_0);
	}
	else
	{
		om_default_config.tx_cpa_0 = 19;
	}

	uint16_t tx_deemph_value_0 = (default_config_value[TX_DEEMPH_VALUE_0_HIGH]<<8) + default_config_value[TX_DEEMPH_VALUE_0_LOW];
	if(tx_deemph_value_0 <= 1023*10)
	{
		om_default_config.tx_deemph_0 = tx_deemph_value_0 * 0.1;
		printf("om_default_config.tx_deemph_0 = %d\n",om_default_config.tx_deemph_0);
	}
	else
	{
		om_default_config.tx_deemph_0 = 0;
	}

	uint16_t apd_value_0 = (default_config_value[RX_VAPD_VALUE_0_HIGH]<<8) + default_config_value[RX_VAPD_VALUE_0_LOW];
	if(apd_value_0 <= 35*10)
	{
		om_default_config.rx_vapd_0 = apd_value_0 * 0.1;
		printf("om_default_config.rx_vapd_0 = %f\n",om_default_config.rx_vapd_0);
	}
	else
	{
		om_default_config.rx_vapd_0 = 17;
	}

	uint16_t eq_value_0 = (default_config_value[RX_EQ_VALUE_0_HIGH]<<8) + default_config_value[RX_EQ_VALUE_0_LOW];
	if(eq_value_0 <= 127*10)
	{
		om_default_config.rx_eq_0 = eq_value_0 * 0.1;
		printf("om_default_config.rx_eq_0 = %d\n",om_default_config.rx_eq_0);
	}
	else
	{
		om_default_config.rx_eq_0 = 40;
	}

	uint16_t swing_value_0 = (default_config_value[RX_SWING_VALUE_0_HIGH]<<8) + default_config_value[RX_SWING_VALUE_0_LOW];
	if(swing_value_0 <= 180*10)
	{
		om_default_config.rx_swing_0 = swing_value_0 * 0.1;
		printf("om_default_config.rx_swing_0 = %d\n",om_default_config.rx_swing_0);
	}
	else
	{
		om_default_config.rx_swing_0 = 100;
	}

	uint16_t rx_deemph_value_0 = (default_config_value[RX_DEEMPH_VALUE_0_HIGH]<<8) + default_config_value[RX_DEEMPH_VALUE_0_LOW];
	if(rx_deemph_value_0 <= 15*10)
	{
		om_default_config.rx_deemph_0 = rx_deemph_value_0 * 0.1;
		printf("om_default_config.rx_deemph_0 = %d\n",om_default_config.rx_deemph_0);
	}
	else
	{
		om_default_config.rx_deemph_0 = 0;
	}

	uint16_t rx_los_threshold_value_0 = (default_config_value[RX_LOS_THRESHOLD_VALUE_0_HIGH]<<8) + default_config_value[RX_LOS_THRESHOLD_VALUE_0_LOW];
	if(rx_los_threshold_value_0 <= 63*10)
	{
		om_default_config.rx_los_threshold_0 = rx_los_threshold_value_0 * 0.1;
		printf("om_default_config.rx_los_threshold_0 = %d\n",om_default_config.rx_los_threshold_0);
	}
	else
	{
		om_default_config.rx_los_threshold_0 = 20;
	}

	uint16_t rx_los_hyst_value_0 = (default_config_value[RX_LOS_HYST_VALUE_0_HIGH]<<8) + default_config_value[RX_LOS_HYST_VALUE_0_LOW];	
	if(rx_los_hyst_value_0 <= 31*10)
	{
		om_default_config.rx_los_hyst_0 = rx_los_hyst_value_0 * 0.1;
		printf("om_default_config.rx_los_hyst_0 = %d\n",om_default_config.rx_los_hyst_0);
	}
	else
	{
		om_default_config.rx_los_hyst_0 = 3;
	}

	uint16_t rx_tec_target = (default_config_value[RX_TEC_TARGET_VALUE_HIGH]<<8) + default_config_value[RX_TEC_TARGET_VALUE_LOW];
	if(rx_tec_target <= 55*100)//目标温度不高于55度
	{
		om_default_config.tec_target_temp = rx_tec_target * 0.01;
	}
	else
	{
		om_default_config.tec_target_temp = 50.0;
	}

	/****  50G 校准参数 ****/
	// 电流校准参数
	uint16_t code = (default_config_value[TX_I_SLOPE_HIGH_50G] << 8) + default_config_value[TX_I_SLOPE_LOW_50G];
	if(code != 0xFFFF){
		short cal_tx_i_k_0 = convert_2byte_to_int(default_config_value[TX_I_SLOPE_HIGH_50G], default_config_value[TX_I_SLOPE_LOW_50G]);
		om_default_config.tx_i_slope_0 =  cal_tx_i_k_0 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[TX_I_OFFSET_HIGH_50G] << 8) + default_config_value[TX_I_OFFSET_LOW_50G];
	if(code != 0xFFFF){
		short cal_tx_i_b_0 = convert_2byte_to_int(default_config_value[TX_I_OFFSET_HIGH_50G], default_config_value[TX_I_OFFSET_LOW_50G]);
		om_default_config.tx_i_offset_0 =  cal_tx_i_b_0 * 1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	//发光功率校准参数
	code = (default_config_value[TX_PWR_SLOPE_HIGH_50G] << 8) + default_config_value[TX_PWR_SLOPE_LOW_50G];
	if(code != 0xFFFF){
		short cal_tx_pwr_k_0 = convert_2byte_to_int(default_config_value[TX_PWR_SLOPE_HIGH_50G], default_config_value[TX_PWR_SLOPE_LOW_50G]);
		om_default_config.tx_pwr_slope_0 =  cal_tx_pwr_k_0 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[TX_PWR_OFFSET_HIGH_50G] << 8) + default_config_value[TX_PWR_OFFSET_LOW_50G];
	if(code != 0xFFFF){
		short cal_tx_pwr_b_0 = convert_2byte_to_int(default_config_value[TX_PWR_OFFSET_HIGH_50G], default_config_value[TX_PWR_OFFSET_LOW_50G]);
		om_default_config.tx_pwr_offset_0 =  cal_tx_pwr_b_0*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	
	//接收光功率校准
	code = (default_config_value[RX_PWR_A_HIGH_50G] << 8) + default_config_value[RX_PWR_A_LOW_50G];
	if(code != 0xFFFF){
		short cal_rx_pwr_a_0 = convert_2byte_to_int(default_config_value[RX_PWR_A_HIGH_50G], default_config_value[RX_PWR_A_LOW_50G]);
		om_default_config.rx_pwr_a_0 =  cal_rx_pwr_a_0*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[RX_PWR_B_HIGH_50G] << 8) + default_config_value[RX_PWR_B_LOW_50G];
	if(code != 0xFFFF){
		short cal_rx_pwr_b_0 = convert_2byte_to_int(default_config_value[RX_PWR_B_HIGH_50G], default_config_value[RX_PWR_B_LOW_50G]);
		om_default_config.rx_pwr_b_0 =  cal_rx_pwr_b_0*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[RX_PWR_C_HIGH_50G] << 8) + default_config_value[RX_PWR_C_LOW_50G];
	if(code != 0xFFFF){
		short cal_rx_pwr_c_0 = convert_2byte_to_int(default_config_value[RX_PWR_C_HIGH_50G], default_config_value[RX_PWR_C_LOW_50G]);
		om_default_config.rx_pwr_c_0 =  cal_rx_pwr_c_0*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
}

/*****************************************************************************
 * 函 数 名  : om_default_config_flash_read_10g
 * 作    者  : sjtu
 * 创建日期  : 2025年02月24日
 * 函数功能  : 读取10G模块的配置参数及校准参数
 * 输入参数  : 
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 

*****************************************************************************/
void om_default_config_flash_read_10g()
{
	if(default_config_value[APC_ENABLE_10G_CFG] == 1) // 只有上位机使能的时候，才给tx_apc_en_0赋值为1
	{
		om_default_config.tx_apc_en_1 = default_config_value[APC_ENABLE_10G_CFG];
	}
	else
	{
		om_default_config.tx_apc_en_1 = 0;
	}

	uint16_t apc_target_value_1 = (default_config_value[APC_TARGET_VALUE_10G_CFG_HIGH]<<8) + default_config_value[APC_TARGET_VALUE_10G_CFG_LOW];
	if(apc_target_value_1 <= 1000*10)
	{
		om_default_config.tx_apc_target_1 = apc_target_value_1 * 0.1;
	}
	else
	{
		om_default_config.tx_apc_target_1 = 0;
	}

	uint16_t ibias_value_1 = (default_config_value[TX_IBIAS_VALUE_1_HIGH]<<8) + default_config_value[TX_IBIAS_VALUE_1_LOW];
	if(ibias_value_1 <= 120*10)
	{
		om_default_config.tx_ibias_1 = ibias_value_1 * 0.1 / 0.154;
		printf("om_default_config.tx_ibias_1 = %d\n",om_default_config.tx_ibias_1);
	}
	else
	{
		om_default_config.tx_ibias_1 = 0;
	}

	uint16_t vea_value_1 = (default_config_value[TX_VEA_VALUE_1_HIGH]<<8) + default_config_value[TX_VEA_VALUE_1_LOW];
	if(vea_value_1 <= 2*10)
	{
		om_default_config.tx_vea_1 = vea_value_1 * 0.1;
		printf("om_default_config.tx_vea_1 = %f\n",om_default_config.tx_vea_1);
	}
	else
	{
		om_default_config.tx_vea_1 = 0;
	}

	uint16_t imod_value_1 = (default_config_value[TX_IMOD_VALUE_1_HIGH]<<8) + default_config_value[TX_IMOD_VALUE_1_LOW];
	if(imod_value_1 <= 2500*10)
	{
		om_default_config.tx_imod_1 = imod_value_1 * 0.1;
		printf("om_default_config.tx_imod_1 = %d\n",om_default_config.tx_imod_1);

	}
	else
	{
		om_default_config.tx_imod_1 = 0;
	}

	uint16_t cpa_value_1 = (default_config_value[TX_CPA_VALUE_1_HIGH]<<8) + default_config_value[TX_CPA_VALUE_1_LOW];
	if(cpa_value_1 <= 63*10)
	{
		om_default_config.tx_cpa_1 = cpa_value_1 * 0.1;
		printf("om_default_config.tx_cpa_1 = %d\n",om_default_config.tx_cpa_1);
		
	}
	else
	{
		om_default_config.tx_cpa_1 = 31;
	}

	uint16_t tx_deemph_value_1 = (default_config_value[TX_DEEMPH_VALUE_1_HIGH]<<8) + default_config_value[TX_DEEMPH_VALUE_1_LOW];
	if(tx_deemph_value_1 <= 31*10)
	{
		om_default_config.tx_deemph_1 = tx_deemph_value_1 * 0.1;
		printf("om_default_config.tx_deemph_1 = %d\n",om_default_config.tx_deemph_1);
		
	}
	else
	{
		om_default_config.tx_deemph_1 = 0;
	}

	uint16_t apd_value_1 = (default_config_value[RX_VAPD_VALUE_1_HIGH]<<8) + default_config_value[RX_VAPD_VALUE_1_LOW];
	if(apd_value_1 <= 40*10)
	{
		om_default_config.rx_vapd_1 = apd_value_1 * 0.1;
	}
	else
	{
		om_default_config.rx_vapd_1 = 0;
	}

	uint16_t eq_value_1 = (default_config_value[RX_EQ_VALUE_1_HIGH]<<8) + default_config_value[RX_EQ_VALUE_1_LOW];
	if(eq_value_1 <= 31*10)
	{
		om_default_config.rx_eq_1 = eq_value_1 * 0.1;
	}
	else
	{
		om_default_config.rx_eq_1 = 0;
	}

	uint16_t swing_value_1 = (default_config_value[RX_SWING_VALUE_1_HIGH]<<8) + default_config_value[RX_SWING_VALUE_1_LOW];
	if(swing_value_1 <= 15*10)
	{
		om_default_config.rx_swing_1 = swing_value_1 * 0.1;
	}
	else
	{
		om_default_config.rx_swing_1 = 9;
	}

	uint16_t rx_deemph_value_1 = (default_config_value[RX_DEEMPH_VALUE_1_HIGH]<<8) + default_config_value[RX_DEEMPH_VALUE_1_LOW];
	if(rx_deemph_value_1 <= 15*10)
	{
		om_default_config.rx_deemph_1 = rx_deemph_value_1 * 0.1;
	}
	else
	{
		om_default_config.rx_deemph_1 = 0;
	}

	uint16_t rx_los_threshold_value_1 = (default_config_value[RX_LOS_THRESHOLD_VALUE_1_HIGH]<<8) + default_config_value[RX_LOS_THRESHOLD_VALUE_1_LOW];
	if(rx_los_threshold_value_1 <= 63*10)
	{
		om_default_config.rx_los_threshold_1 = rx_los_threshold_value_1 * 0.1;
	}
	else
	{
		om_default_config.rx_los_threshold_1 = 19;
	}

	uint16_t rx_los_hyst_value_1 = (default_config_value[RX_LOS_HYST_VALUE_1_HIGH]<<8) + default_config_value[RX_LOS_HYST_VALUE_1_LOW];
	if(rx_los_hyst_value_1 <= 31*10)
	{
		om_default_config.rx_los_hyst_1 = rx_los_hyst_value_1 * 0.1;
	}
	else
	{
		om_default_config.rx_los_hyst_1 = 1;
	}

	/****  10G 校准参数 ****/
	// 电流校准参数
	uint16_t code = (default_config_value[TX_I_SLOPE_HIGH_10G] << 8) + default_config_value[TX_I_SLOPE_LOW_10G];
	if(code != 0xFFFF){
		short cal_tx_i_k_1 = convert_2byte_to_int(default_config_value[TX_I_SLOPE_HIGH_10G], default_config_value[TX_I_SLOPE_LOW_10G]);
		om_default_config.tx_i_slope_1 =  cal_tx_i_k_1 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[TX_I_OFFSET_HIGH_10G] << 8) + default_config_value[TX_I_OFFSET_LOW_10G];
	if(code != 0xFFFF){
		short cal_tx_i_b_1 = convert_2byte_to_int(default_config_value[TX_I_OFFSET_HIGH_10G], default_config_value[TX_I_OFFSET_LOW_10G]);
		om_default_config.tx_i_offset_1 =  cal_tx_i_b_1 * 1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	
	// 发送光功率校准参数
	code = (default_config_value[TX_PWR_SLOPE_HIGH_10G] << 8) + default_config_value[TX_PWR_SLOPE_LOW_10G];
	if(code != 0xFFFF){
		short cal_tx_pwr_k_1 = convert_2byte_to_int(default_config_value[TX_PWR_SLOPE_HIGH_10G], default_config_value[TX_PWR_SLOPE_LOW_10G]);
		om_default_config.tx_pwr_slope_1 =  cal_tx_pwr_k_1 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[TX_PWR_OFFSET_HIGH_10G] << 8) + default_config_value[TX_PWR_OFFSET_LOW_10G];
	if(code != 0xFFFF){
		short cal_tx_pwr_b_1 = convert_2byte_to_int(default_config_value[TX_PWR_OFFSET_HIGH_10G], default_config_value[TX_PWR_OFFSET_LOW_10G]);
		om_default_config.tx_pwr_offset_1 =  cal_tx_pwr_b_1*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
	
	//接收光功率校准参数
	code = (default_config_value[RX_PWR_A_HIGH_10G] << 8) + default_config_value[RX_PWR_A_LOW_10G];
	if(code != 0xFFFF){
		short cal_rx_pwr_a_1 = convert_2byte_to_int(default_config_value[RX_PWR_A_HIGH_10G], default_config_value[RX_PWR_A_LOW_10G]);
		om_default_config.rx_pwr_a_1 =  cal_rx_pwr_a_1*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[RX_PWR_B_HIGH_10G] << 8) + default_config_value[RX_PWR_B_LOW_10G];
	if(code != 0xFFFF){
		short cal_rx_pwr_b_1 = convert_2byte_to_int(default_config_value[RX_PWR_B_HIGH_10G], default_config_value[RX_PWR_B_LOW_10G]);
		om_default_config.rx_pwr_b_1 =  cal_rx_pwr_b_1*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[RX_PWR_C_HIGH_10G] << 8) + default_config_value[RX_PWR_C_LOW_10G];
	if(code != 0xFFFF){
		short cal_rx_pwr_c_1 = convert_2byte_to_int(default_config_value[RX_PWR_C_HIGH_10G], default_config_value[RX_PWR_C_LOW_10G]);
		om_default_config.rx_pwr_c_1 =  cal_rx_pwr_c_1*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
}

/*****************************************************************************
 * 函 数 名  : om_default_config_flash_read_1g
 * 作    者  : sjtu
 * 创建日期  : 2025年02月24日
 * 函数功能  : 读取1G模块的配置参数及校准参数
 * 输入参数  : 
 * 输出参数  : 无
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 

*****************************************************************************/
void om_default_config_flash_read_1g()
{
	if(default_config_value[APC_ENABLE_1G_CFG] == 1) // 只有上位机使能的时候，才给tx_apc_en_0赋值为1
	{
		om_default_config.tx_apc_en_2 = default_config_value[APC_ENABLE_1G_CFG];
	}
	else
	{
		om_default_config.tx_apc_en_2 = 0;
	}

	uint16_t apc_target_value_2 = (default_config_value[APC_TARGET_VALUE_1G_CFG_HIGH]<<8) + default_config_value[APC_TARGET_VALUE_1G_CFG_LOW];
	if(apc_target_value_2 <= 750*10)
	{
		om_default_config.tx_apc_target_2 = apc_target_value_2 * 0.1;//10bit
	}
	else
	{
		om_default_config.tx_apc_target_2 = 0;
	}

	uint16_t ibias_value_2 = (default_config_value[TX_IBIAS_VALUE_2_HIGH]<<8) + default_config_value[TX_IBIAS_VALUE_2_LOW];
	if(ibias_value_2 <= 100*10)
	{
		om_default_config.tx_ibias_2 = (ibias_value_2 * 0.1) / 0.124;
	}
	else
	{
		om_default_config.tx_ibias_2 = 0;
	}

	uint16_t imod_value_2 = (default_config_value[TX_IMOD_VALUE_2_HIGH]<<8) + default_config_value[TX_IMOD_VALUE_2_LOW];
	if(imod_value_2 <= 100*10)
	{
		om_default_config.tx_imod_2 = imod_value_2 * 0.1;
	}
	else
	{
		om_default_config.tx_imod_2 = 0;
	}

	uint16_t cpa_value_2 = (default_config_value[TX_CPA_VALUE_2_HIGH]<<8) + default_config_value[TX_CPA_VALUE_2_LOW];
	if(cpa_value_2 <= 255*10)
	{
		om_default_config.tx_cpa_2 = cpa_value_2 * 0.1;
	}
	else
	{
		om_default_config.tx_cpa_2 = 16;
	}

	uint16_t apd_value_2 = (default_config_value[RX_VAPD_VALUE_2_HIGH]<<8) + default_config_value[RX_VAPD_VALUE_2_LOW];
	if(apd_value_2 <= 50*10)
	{
		om_default_config.rx_vapd_2 = apd_value_2 * 0.1;
	}
	else
	{
		om_default_config.rx_vapd_2 = 0;
	}

	uint16_t swing_value_2 = (default_config_value[RX_SWING_VALUE_2_HIGH]<<8) + default_config_value[RX_SWING_VALUE_2_LOW];
	if(swing_value_2 <= 171*10)
	{
		om_default_config.rx_swing_2 = swing_value_2 * 0.1;
	}
	else
	{
		om_default_config.rx_swing_2 = 171;
	}

	uint16_t rx_los_threshold_value_2 = (default_config_value[RX_LOS_THRESHOLD_VALUE_2_HIGH]<<8) + default_config_value[RX_LOS_THRESHOLD_VALUE_2_LOW];
	if(rx_los_threshold_value_2 <= 255*10)
	{
		om_default_config.rx_los_threshold_2 = rx_los_threshold_value_2 * 0.1;
	}
	else
	{
		om_default_config.rx_los_threshold_2 = 32;
	}

	uint16_t rx_los_hyst_value_2 = (default_config_value[RX_LOS_HYST_VALUE_2_HIGH]<<8) + default_config_value[RX_LOS_HYST_VALUE_2_LOW];
	if(rx_los_hyst_value_2 <= 3*10)
	{
		om_default_config.rx_los_hyst_2 = rx_los_hyst_value_2 * 0.1;
	}
	else
	{
		om_default_config.rx_los_hyst_2 = 2;
	}	

	/****  1G 校准参数 ****/
	// 电流校准参数
	uint16_t code = (default_config_value[TX_I_SLOPE_HIGH_1G] << 8) + default_config_value[TX_I_SLOPE_LOW_1G];
	if(code != 0xFFFF){
		short cal_tx_i_k_2 = convert_2byte_to_int(default_config_value[TX_I_SLOPE_HIGH_1G], default_config_value[TX_I_SLOPE_LOW_1G]);
		om_default_config.tx_i_slope_2 = cal_tx_i_k_2 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[TX_I_OFFSET_HIGH_1G] << 8) + default_config_value[TX_I_OFFSET_LOW_1G];
	if(code != 0xFFFF){
		short cal_tx_i_b_2 = convert_2byte_to_int(default_config_value[TX_I_OFFSET_HIGH_1G], default_config_value[TX_I_OFFSET_LOW_1G]);
		om_default_config.tx_i_offset_2 = cal_tx_i_b_2 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	// 发送光功率校准参数
	code = (default_config_value[TX_PWR_SLOPE_HIGH_1G] << 8) + default_config_value[TX_PWR_SLOPE_LOW_1G];
	if(code != 0xFFFF){
		short cal_tx_pwr_k_2 = convert_2byte_to_int(default_config_value[TX_PWR_SLOPE_HIGH_1G], default_config_value[TX_PWR_SLOPE_LOW_1G]);
		om_default_config.tx_pwr_slope_2 = cal_tx_pwr_k_2 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[TX_PWR_OFFSET_HIGH_1G] << 8) + default_config_value[TX_PWR_OFFSET_LOW_1G];
	if(code != 0xFFFF){
		short cal_tx_pwr_b_2 = convert_2byte_to_int(default_config_value[TX_PWR_OFFSET_HIGH_1G], default_config_value[TX_PWR_OFFSET_LOW_1G]);
		om_default_config.tx_pwr_offset_2 = cal_tx_pwr_b_2 * 1.0 / CALIBRATION_ACCURACY_FACTOR_1000;
	}

	//接收光功率校准参数
	code = (default_config_value[RX_PWR_A_HIGH_1G] << 8) + default_config_value[RX_PWR_A_LOW_1G];
	if(code != 0xFFFF){
		short cal_rx_pwr_a_2 = convert_2byte_to_int(default_config_value[RX_PWR_A_HIGH_1G], default_config_value[RX_PWR_A_LOW_1G]);
		om_default_config.rx_pwr_a_2 =  cal_rx_pwr_a_2*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[RX_PWR_B_HIGH_1G] << 8) + default_config_value[RX_PWR_B_LOW_1G];
	if(code != 0xFFFF){
		short cal_rx_pwr_b_2 = convert_2byte_to_int(default_config_value[RX_PWR_B_HIGH_1G], default_config_value[RX_PWR_B_LOW_1G]);
		om_default_config.rx_pwr_b_2 =  cal_rx_pwr_b_2*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}

	code = (default_config_value[RX_PWR_C_HIGH_1G] << 8) + default_config_value[RX_PWR_C_LOW_1G];
	if(code != 0xFFFF){
		short cal_rx_pwr_c_2 = convert_2byte_to_int(default_config_value[RX_PWR_C_HIGH_1G], default_config_value[RX_PWR_C_LOW_1G]);
		om_default_config.rx_pwr_c_2 =  cal_rx_pwr_c_2*1.0/CALIBRATION_ACCURACY_FACTOR_1000;
	}
}

/*****************************************************************************
 * 函 数 名  : convert_2byte_to_uint16
 * 作    者  : sjtu
 * 创建日期  : 2025年03月19日
 * 函数功能  : 接收两个字节的数据，做正负判断，并将负数解码
 * 输入参数  : 
 * 输出参数  : 
 * 返 回 值  : 
 * 调用关系  : 
 * 其    它  : 

*****************************************************************************/
short convert_2byte_to_int(uint8_t value_high, uint8_t value_low)
{
	uint16_t code = (value_high << 8) + value_low;
	short value = 0;
	
	if(value_high & 0x80){ // 负数
		value = -(~(code - 1));
	}
	else{ // 正数
		value = code;
	}
	
	return value;
}
